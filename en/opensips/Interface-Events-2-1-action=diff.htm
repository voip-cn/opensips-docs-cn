<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>openSIPS | Documentation / Events Interface - 2.1 | History</title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href="opensips.css" tppabs="http://www.opensips.org/pub/skins/opensips/opensips.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  .diffbox { width:570px; border-left:1px #999999 solid; margin-top:1.33em; }
  .diffauthor { font-weight:bold; }
  .diffchangesum { font-weight:bold; }
  .difftime { font-family:verdana,sans-serif; font-size:66%; 
    background-color:#dddddd; }
  .difftype { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; font-weight:bold; }
  .diffadd { border-left:5px #99ff99 solid; padding-left:5px; }
  .diffdel { border-left:5px #ffff99 solid; padding-left:5px; }
  .diffrestore { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; margin:1.5em 0px; }
  .diffmarkup { font-family:monospace; }  
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

  <link rel="icon" type="image/png" href="http://opensips.org/favicon.png">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','analytics.js'/*tpa=http://www.google-analytics.com/analytics.js*/,'ga');

  ga('create', 'UA-47615177-1', 'http://www.opensips.org/Documentation/opensips.org');
  ga('send', 'pageview');

	function resizeIframe(obj) {
	    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
		  }

  </script>

</head>
<body>
<div id="main">
<!--PageHeaderFmt-->
  <div id='wikilogo'>
  <img class="motto" src="motto.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/motto.jpg" width="328" height="40" alt="The new breed of communication engine.">
  <a href="javascript:if(confirm(%27http://www.opensips.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/%27" tppabs="http://www.opensips.org/"><img class="logo" src="logo2.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/logo2.jpg"
    alt='openSIPS' border='0' /></a>
 </div>
 <div id='wikihead'>
 <table border=0>
  <tr valign=top><td width=250>
   
  </td></tr>
  <tr><td width=250>
   <form action="http://www.opensips.org/">
   
    <input type='hidden' name='n' value='Documentation.Interface-Events-2-1' />
    <input type='hidden' name='action' value='search' />

    <input type='text' name='q' id='formsubmit' value='' class='inputbox searchbox' />
	<input type='submit' id='formbutton' class='inputbutton searchbutton' value=' ' /></form>
  </td></tr>
  </table>
 </div>

<!--/PageHeaderFmt-->
<div id="osTopNav" >
	<div id="osTopNavLeft">
	</div>

	<div id="osTopNavRight">
	</div>

	<ul id="osTopNavList">
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/About/About  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/About/About%27" tppabs="http://www.opensips.org/About/About" title="About">About</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Downloads/Downloads  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Downloads/Downloads%27" tppabs="http://www.opensips.org/Downloads/Downloads" title="Download">Downloads</a>
		</li>
		<li>
			<a href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals" title="Documentation">Documentation</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Community/Foundation-Main  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Community/Foundation-Main%27" tppabs="http://www.opensips.org/Community/Foundation-Main" title="Community">Community</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Development/Development  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Development/Development%27" tppabs="http://www.opensips.org/Development/Development" title="Development">Development</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Support/Contact  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Support/Contact%27" tppabs="http://www.opensips.org/Support/Contact" title="Support">Support</a>
		</li>
	</ul>
</div>
<!--PageMenuFmt-->
<!--/PageMenuFmt-->
  <table width='100%' align="center" cellpadding='0' cellspacing='0' id='wikimid'>
    <tr>
<!--PageLeftFmt-->
      <td valign='top' bgcolor="#E2F8DA" id='wikileft'>
        <p class='sidehead'> <span  style='color: #185662;'> Documentation</span>
</p><ul><li><a class='wikilink' title='Manuals' href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals">Manuals</a>
</li><li><a class='wikilink' title='Tutorials' href="Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Tutorials">Advanced Tutorials</a>
</li><li><a class='wikilink' title='TipsFAQ' href="TipsFAQ.htm" tppabs="http://www.opensips.org/Documentation/TipsFAQ">Tips &amp; FAQ</a>
</li><li><a class='wikilink' title='Migration' href="Migration.htm" tppabs="http://www.opensips.org/Documentation/Migration">Version Migration</a>
</li><li><a class='wikilink' title='Webinars' href="Webinars.htm" tppabs="http://www.opensips.org/Documentation/Webinars">OpenSIPS Webinars</a>
</li><li><a class='wikilink' title='Troubleshooting' href="Troubleshooting.htm" tppabs="http://www.opensips.org/Documentation/Troubleshooting">Troubleshooting</a>
</li><li><a class='wikilink' title='Tools' href="Tools.htm" tppabs="http://www.opensips.org/Documentation/Tools">OpenSIPS Tools</a>
</li><li><a class='wikilink' title='Development-Tutorials' href="Development-Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Development-Tutorials">Devel Tutorial</a>
</li></ul><div class='vspace'></div>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageTitleFmt-->
        
<!--PageText-->
<div id='wikitext'>
<h2 class='wikiaction'>Documentation.Interface-Events-2-1 History</h2>
  <p><a href="Interface-Events-2-1-action=diff&source=n&minor=n.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=diff&source=n&minor=n">Hide minor edits</a> - <a href="Interface-Events-2-1-action=diff&source=y&minor=y.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=diff&source=y&minor=y">Show changes to markup</a></p>
  <div id='wikidiff'>
      <div class='diffbox'><div class='difftime'>June 16, 2015, at 02:39 PM 
        by <span class='diffauthor' title='84.25.88.65'>hydrosine</span> - </div>
        <div class='difftype'>Changed lines 44-47 from:</div>
        <div class='diffdel'><ul><li>event_datagram - sends Datagrams over UDP or UNIX sockets
</li><li>event_rabbitmq - sends an AMQP message to a RabbitMQ server
</li><li>event_xmlrpc - issues a RPC command on a RPC server
</li><li>event_route - runs an OpenSIPS event_route in script
</li></ul>
</div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><ul><li>event_datagram - sends Datagrams over UDP or UNIX sockets
</li><li>event_rabbitmq - sends an AMQP message to a RabbitMQ server
</li><li>event_xmlrpc - issues a RPC command on a RPC server
</li><li>event_route - runs an OpenSIPS event_route in script
</li></ul>
</div></div>
      <div class='diffrestore'><a href="Interface-Events-2-1-action=edit&restore=diff-1434458353-1395341809-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=edit&restore=diff:1434458353:1395341809:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>March 20, 2014, at 07:56 PM 
        by <span class='diffauthor' title='89.120.101.121'>razvancrainea</span> - </div>
        <div class='difftype'>Added lines 1-75:</div>
        <div class='diffadd'><h5>Documentation -&gt; <a class='wikilink' title='Manuals' href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals">Manuals</a> -&gt; <a class='wikilink' title='OpenSIPS Manual - 2.1' href="Manual-2-1.htm" tppabs="http://www.opensips.org/Documentation/Manual-2-1">Manual devel</a> -&gt; Events Interface</h5>
<p>(:title Events Interface - 2.1:)
</p><hr />
<p>(:allVersions Interface-Events 2.1:)
</p>
<p class='vspace'><br />
</p><table width='100%'><tr ><td  align='center'><span  style='color: #185662;'><span style='font-size:120%'><strong>Events Interface v2.1 </strong></span></span></td></tr>
</table>
<div class='vspace'></div><table width='100%'><tr ><td  align='left'><a class='wikilink' title='Core MI Functions - 2.1' href="Interface-CoreMI-2-1.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-2-1">Prev</a></td><td  align='right'><a class='wikilink' title='Core Events - devel' href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Interface-CoreEvents-2-1  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Interface-CoreEvents-2-1%27" tppabs="http://www.opensips.org/Documentation/Interface-CoreEvents-2-1">Next</a></td></tr>
</table><hr />
<p class='vspace'>The <strong>Events Interface</strong> is an OpenSIPS interface that provides different ways to notify external applications about certain events triggered inside OpenSIPS.
</p>
<div class='vspace'></div><h4>Overview</h4>
<p>In order to notify an external application about OpenSIPS internal events, the <strong>Event Interface</strong> provides the following functions:
</p><ol><li>manages exported events
</li><li>manages subscriptions from different applications
</li><li>exports generic functions to raise an event (regardless the transport protocol used)
</li><li>communicates with different transport protocols to send the events
</li></ol><p class='vspace'>More detailed information about <strong>OpenSIPS Event Interface</strong> can be found in the <a class='wikilink' title='Tutorials-EventInterface' href="Tutorials-EventInterface.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-EventInterface">Event Interface Tutorial</a>.
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h4>Events</h4>
<p>There are several types of events that can be exported by OpenSIPS:
</p><ul><li><strong>Core events</strong> - internal events that trigger changes of OpenSIPS core/global behavior. A full list of exported core events can be found <a class='wikilink' title='Core Events - devel' href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Interface-CoreEvents-2-1  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Interface-CoreEvents-2-1%27" tppabs="http://www.opensips.org/Documentation/Interface-CoreEvents-2-1">here</a>.
</li><li><strong>Modules events</strong> - events triggered by each module, when loaded. Each module can export zero, one or more events. Details can be found in the <a class='wikilink' title='Modules - 2.1' href="Modules-2-1.htm" tppabs="http://www.opensips.org/Documentation/Modules-2-1">documentation page</a> of each module.
</li><li><strong>Custom events</strong> - triggered from script using the <a class='wikilink' title='Core Functions - 2.1' href="Script-CoreFunctions-2-1.htm#raise_event" tppabs="http://www.opensips.org/Documentation/Script-CoreFunctions-2-1#raise_event">raise_event()</a> command.
</li></ul><div class='vspace'></div><hr />
<div class='vspace'></div><h4>Transport Protocols</h4>
<p>External applications can be notified about the events triggered using various transport protocols. While the interface itself is provided by OpenSIPS core, each transport protocol is implemented by a separate OpenSIPS module. Multiple transport modules can be loaded simultaneously in order to provide different ways of notifications.
</p>
<p class='vspace'>Available transport protocols are :
</p>
<div class='vspace'></div><ul><li>event_datagram - sends Datagrams over UDP or UNIX sockets
</li><li>event_rabbitmq - sends an AMQP message to a RabbitMQ server
</li><li>event_xmlrpc - issues a RPC command on a RPC server
</li><li>event_route - runs an OpenSIPS event_route in script
</li></ul><p class='vspace'>An external application can subscribe to any of the exported module and can be notified using any of the loaded transport modules/protocols.
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h4>Events Subscription</h4>
<p>You can subscribe for an event either at startup (using the <a class='wikilink' title='Core Functions - 2.1' href="Script-CoreFunctions-2-1.htm#subscribe_event" tppabs="http://www.opensips.org/Documentation/Script-CoreFunctions-2-1#subscribe_event">subscribe_event()</a> command in the script) or during runtime, using the <a class='wikilink' title='Core MI Functions - 2.1' href="Interface-CoreMI-2-1.htm#event_subscribe" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-2-1#event_subscribe">event_subscribe</a> MI command.
</p><hr />
<div class='vspace'></div><h4>Examples</h4>
<p>In order to configure a RabbbitMQ server to be notified when a custom event is triggered, first you have to subscribe it to the event, using the <a class='wikilink' title='Core Functions - 2.1' href="Script-CoreFunctions-2-1.htm#subscribe_event" tppabs="http://www.opensips.org/Documentation/Script-CoreFunctions-2-1#subscribe_event">subscribe_event()</a> command:
</p>
<div class='vspace'></div><pre class='escaped'>
    startup_route {
        subscribe_event("E_SCRIPT_CUSTOM_EVENT", "rabbitmq:127.0.0.1/opensips");
    }
</pre>
<p class='vspace'>Then, in order to trigger the event from the script, call the <a class='wikilink' title='Core Functions - 2.1' href="Script-CoreFunctions-2-1.htm#raise_event" tppabs="http://www.opensips.org/Documentation/Script-CoreFunctions-2-1#raise_event">raise_event()</a> command when needed:
</p>
<div class='vspace'></div><pre class='escaped'>
   ....
   raise_event("E_SCRIPT_CUSTOM_EVENT");     # raises an event without any parameters
   ...
</pre>
</div></div>
      <div class='diffrestore'><a href="Interface-Events-2-1-action=edit&restore=diff-1395341809-1395341809-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=edit&restore=diff:1395341809:1395341809:&preview=y">Restore</a></div></div></div>
  
<!--PageRightFmt--><!--/PageRightFmt--></td>
</tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
  <hr class="bottomline" /></td>
    <div class='footnav'>
	
      <a rel="nofollow" href="Interface-Events-2-1-action=edit.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=edit">Edit</a> |
      <a rel="nofollow" href="Interface-Events-2-1-action=diff.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=diff">History</a> |
      <a rel="nofollow" href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Interface-Events-2-1?action=print  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Interface-Events-2-1?action=print%27" tppabs="http://www.opensips.org/Documentation/Interface-Events-2-1?action=print" target='_blank'>Print</a> |
      <a href="RecentChanges.htm" tppabs="http://www.opensips.org/Documentation/RecentChanges">Recent Changes</a> |
      <a href="javascript:if(confirm(%27http://www.opensips.org/Site/Search  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Site/Search%27" tppabs="http://www.opensips.org/Site/Search">Search</a></div>
    <div class='lastmod'>Page last modified on June 16, 2015, at 02:39 PM</div></div>
<!--HTMLFooter-->
</div>
</body>
</html>
