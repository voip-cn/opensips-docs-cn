<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>openSIPS | Documentation / Tutorials-OpenSIPSonRedHat | History</title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href="opensips.css" tppabs="http://www.opensips.org/pub/skins/opensips/opensips.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  .diffbox { width:570px; border-left:1px #999999 solid; margin-top:1.33em; }
  .diffauthor { font-weight:bold; }
  .diffchangesum { font-weight:bold; }
  .difftime { font-family:verdana,sans-serif; font-size:66%; 
    background-color:#dddddd; }
  .difftype { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; font-weight:bold; }
  .diffadd { border-left:5px #99ff99 solid; padding-left:5px; }
  .diffdel { border-left:5px #ffff99 solid; padding-left:5px; }
  .diffrestore { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; margin:1.5em 0px; }
  .diffmarkup { font-family:monospace; }  
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

  <link rel="icon" type="image/png" href="http://opensips.org/favicon.png">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','analytics.js'/*tpa=http://www.google-analytics.com/analytics.js*/,'ga');

  ga('create', 'UA-47615177-1', 'http://www.opensips.org/Documentation/opensips.org');
  ga('send', 'pageview');

	function resizeIframe(obj) {
	    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
		  }

  </script>

</head>
<body>
<div id="main">
<!--PageHeaderFmt-->
  <div id='wikilogo'>
  <img class="motto" src="motto.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/motto.jpg" width="328" height="40" alt="The new breed of communication engine.">
  <a href="javascript:if(confirm(%27http://www.opensips.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/%27" tppabs="http://www.opensips.org/"><img class="logo" src="logo2.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/logo2.jpg"
    alt='openSIPS' border='0' /></a>
 </div>
 <div id='wikihead'>
 <table border=0>
  <tr valign=top><td width=250>
   
  </td></tr>
  <tr><td width=250>
   <form action="http://www.opensips.org/">
   
    <input type='hidden' name='n' value='Documentation.Tutorials-OpenSIPSonRedHat' />
    <input type='hidden' name='action' value='search' />

    <input type='text' name='q' id='formsubmit' value='' class='inputbox searchbox' />
	<input type='submit' id='formbutton' class='inputbutton searchbutton' value=' ' /></form>
  </td></tr>
  </table>
 </div>

<!--/PageHeaderFmt-->
<div id="osTopNav" >
	<div id="osTopNavLeft">
	</div>

	<div id="osTopNavRight">
	</div>

	<ul id="osTopNavList">
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/About/About  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/About/About%27" tppabs="http://www.opensips.org/About/About" title="About">About</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Downloads/Downloads  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Downloads/Downloads%27" tppabs="http://www.opensips.org/Downloads/Downloads" title="Download">Downloads</a>
		</li>
		<li>
			<a href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals" title="Documentation">Documentation</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Community/Foundation-Main  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Community/Foundation-Main%27" tppabs="http://www.opensips.org/Community/Foundation-Main" title="Community">Community</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Development/Development  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Development/Development%27" tppabs="http://www.opensips.org/Development/Development" title="Development">Development</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Support/Contact  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Support/Contact%27" tppabs="http://www.opensips.org/Support/Contact" title="Support">Support</a>
		</li>
	</ul>
</div>
<!--PageMenuFmt-->
<!--/PageMenuFmt-->
  <table width='100%' align="center" cellpadding='0' cellspacing='0' id='wikimid'>
    <tr>
<!--PageLeftFmt-->
      <td valign='top' bgcolor="#E2F8DA" id='wikileft'>
        <p class='sidehead'> <span  style='color: #185662;'> Documentation</span>
</p><ul><li><a class='wikilink' title='Manuals' href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals">Manuals</a>
</li><li><a class='wikilink' title='Tutorials' href="Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Tutorials">Advanced Tutorials</a>
</li><li><a class='wikilink' title='TipsFAQ' href="TipsFAQ.htm" tppabs="http://www.opensips.org/Documentation/TipsFAQ">Tips &amp; FAQ</a>
</li><li><a class='wikilink' title='Migration' href="Migration.htm" tppabs="http://www.opensips.org/Documentation/Migration">Version Migration</a>
</li><li><a class='wikilink' title='Webinars' href="Webinars.htm" tppabs="http://www.opensips.org/Documentation/Webinars">OpenSIPS Webinars</a>
</li><li><a class='wikilink' title='Troubleshooting' href="Troubleshooting.htm" tppabs="http://www.opensips.org/Documentation/Troubleshooting">Troubleshooting</a>
</li><li><a class='wikilink' title='Tools' href="Tools.htm" tppabs="http://www.opensips.org/Documentation/Tools">OpenSIPS Tools</a>
</li><li><a class='wikilink' title='Development-Tutorials' href="Development-Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Development-Tutorials">Devel Tutorial</a>
</li></ul><div class='vspace'></div>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageTitleFmt-->
        
<!--PageText-->
<div id='wikitext'>
<h2 class='wikiaction'>Documentation.Tutorials-OpenSIPSonRedHat History</h2>
  <p><a href="Tutorials-OpenSIPSonRedHat-action=diff&source=y&minor=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=diff&source=y&minor=y">Show minor edits</a> - <a href="Tutorials-OpenSIPSonRedHat-action=diff&source=n&minor=n.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=diff&source=n&minor=n">Show changes to output</a></p>
  <div id='wikidiff'>
      <div class='diffbox'><div class='difftime'>May 16, 2013, at 06:16 PM 
        by <span class='diffauthor' title='109.99.235.212'>109.99.235.212</span> - </div>
        <div class='difftype'>Changed line 1 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!![[Documentation.Index | Documentation]] -&gt; [[Documentation.Tutorials | Tutorials ]] -&gt; [[Documentation.Tutorials-OpenSIPSonRedHat |  OpenSIPS on RedHat Rel5]]</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!!!!!Documentation -&gt; [[Documentation.Tutorials | Tutorials ]] -&gt; OpenSIPS on RedHat Rel5</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSonRedHat-action=edit&restore=diff-1368721009-1368109929-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=edit&restore=diff:1368721009:1368109929:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 04:32 PM 
        by <span class='diffauthor' title='79.118.227.150'>79.118.227.150</span> - </div>
        <div class='difftype'>Changed lines 1-2 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!!Resources -&gt; [[Resources.Documentation | Documentation]] -&gt; [[Resources.DocsTutorials | Tutorials]] -&gt; OpenSIPS on RedHat Rel5</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!![[Documentation.Index | Documentation]] -&gt; [[Documentation.Tutorials | Tutorials ]] -&gt; [[Documentation.Tutorials-OpenSIPSonRedHat |  OpenSIPS on RedHat Rel5]]<br />----</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSonRedHat-action=edit&restore=diff-1368109929-1366826160-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=edit&restore=diff:1368109929:1366826160:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>April 24, 2013, at 07:56 PM 
        by <span class='diffauthor' title='79.118.215.235'>79.118.215.235</span> - </div>
        <div class='difftype'>Added lines 1-428:</div>
        <div class='diffadd'><div class='diffmarkup'>!!Resources -&gt; [[Resources.Documentation | Documentation]] -&gt; [[Resources.DocsTutorials | Tutorials]] -&gt; OpenSIPS on RedHat Rel5<br />This page has been visited {$PageCount} times.<br />(:toc-float Table of Content:)<br />----<br /><br />The following document will guide you through the installation of the newly released OpenSIPS version 1.5 in Red Hat Enterprise Linux 5.3 along with mysql. I will divide this process in 2 phases:<br />#- Installation of Red Hat Enterprise Linux 5.3  <br />#- Installation and configuration of OpenSIPS, webmin and mysql  <br /> <br />The following components and parameters will be used for the purpose  <br />of this installation guide, securing your OpenSIPS environment is  <br />beyond this installation guide,  <br /> <br />*Red Hat Enterprise Linux Server release 5.3 (Tikanga), 2.6.18-128.1.6.el5  <br />*mysql-server-5.0.45-7.el5.i386  <br />*An HP DL380 3.20 2gb of RAM  <br />*Fully Qualified Domain Name of the server will be simulacro.sipcorner.com  <br />*IP address of the server 10.10.10.101  <br /> <br />!!!Installation of Red Hat Enterprise Linux 5 (Phase 1)  <br /> <br />Let's Proceed to install Red Hat Enterprise Linux 5  <br />*Proceed to Insert the RHEL 5 DVD in your server  <br /><br />At the RHEL boot screen &quot;press enter&quot;<br /><br />The system will ask you to either test the media or skip the media test,  <br />I personally choose to skip the media since I know the integrity of the DVD  <br />is good, but if you have doubts about the integrity of your media I will  <br />suggest you to continue with the media test.<br />*At the RED HAT ENTERPRISE LINUX 5 initial Install screen select NEXT  <br />*Proceed to select the language, I selected English(English)  <br />*Proceed to select the appropriate keyboard for the System, I selected U.S. English  <br />*Proceed to enter the Red Hat installation number and select OK  <br />*Select to Install Red Hat Enterprise Linux Server, then select OK  <br />*Because I have RHEL 5 currently installed in my Hard Drive, and I want to install a new copy of RHEL 5, the system will now asked me if I want to remove all linux partitions on the selected drives and create a default layout, since I want to do this, I will simply select the NEXT button  <br />*As a precaution, the system will asked me if I really want to remove all the existing Linux partitions in the Hard Drive, Since i want to do this I select the Yes button.  <br />*The system will now asked to configure the ethernet0 interface, since I want the system to have an static IP address, I select the eth0 interface and I select EDIT.  <br />*The EDIT Interface screen will open, and I will now proceed to enter my network information manually, then select OK, next I proceed to enter the FQDN for this server, for example simulacro.sipcorner.com, next I will proceed to continue entering my network information, such as my gateway, primary DNS and Secondary DNS servers, then I will proceed to select the NEXT button  <br />*Proceed to select your timezone accordingly <br />*Proceed to enter a Password for the Root Account  <br />*Red Hat Enterprise Linux 5 default installation includes a set of software applicable for general internet usage, although you can choose to install additional components, such as servers and others, for the purposes of this document, I will proceed to check the Web Server option and also I will proceed to check the Customize now option, then I will select NEXT.  <br />*Because I checked the customize option, I am now being presented with an screen where I can select different packages that I want the system to install for me during this installation, hence I will select the following packages:  <br />**Servers&gt;Mysql Database&gt;Optional Packages&gt;Default plus  <br />***mysql-devel-5.0.45-7.el5.i386  <br />***php-mysql-5.1.6-23.el5.i386  <br />***mod_auth_mysql-3.0.0-3.1.i386  <br /> <br />**Servers&gt;Web Server&gt;Optional Packages&gt;Default plus  <br />***mod_nss-1.0.3-6.el5.i386  <br /> <br />**Servers&gt;Mail Server&gt;Default  <br /> <br />*The RHEL 5 Installation is now ready to begin, proceed by selecting the NEXT button  <br />*Once the system has finished the installation process the DVD will eject and  a new screen will appear congratulating you, at this point select the Reboot button.  <br />*After the firs Reboot, you will be presented with a Welcome screen, proceed and  select the Forward button, proceed to agree with the license agreement, proceed  to configure your firewall. I will personally select Secure WWWW (HTTPS) and  WWW (HTTP) ports, although under the Other Ports option, I will also proceed to add  port 5060 TCP/UDP to allow SIP dialogs/sessions, although 5060 UDP is enough, but  this is a test box so I decided to open both TCP and UDP, then I will also select  port 10000 TCP for webmin, why webmin?, because if you are not an expert with mysql  webmin can be useful to access mysql and other components via web, instead of the CLI  although webmin is useful when it comes to administer the RHEL box, servers and other  components,in the opensips environment it is highly likely that you will be using  the CLI for almost everything. Next proceed to select the Forward button.  <br />*Proceed to configure SELinux accordingly, I will personally select the Enforcing  option, then proceed to select the Forward button.  <br />*Proceed to configure Kdump accordingly, I personally like Kdump, although it may require  you to do another reboot and do some memory allocation in order to properly work.  <br />*Proceed to configure the Date and Time accordingly, when configuring opensips, the time  can be critical, so i will suggest you to enable NTP, and I personally will add another ntp  server on top of the RHEL ntp servers, ncnoc.ncren.net (because I am in North Carolina), then I will proceed to select the forward button.  <br />*Proceed to Set up Software Updates at your discretion.  <br />*Proceed to create a User accordingly, it is not really safe for you to use the root account  to login to the box, surf the internet, install software and others, although for the purposes of this guide, I will be using the root account during the installation process of opensips and  webmin.  <br />*Proceed to configure the Sound Card, if any  <br />*If you would like to install additional software using CD's, you may do so at this time, otherwise  select the Finish button, the system will proceed to restart  <br />*Once the server has rebooted Proceed to access the Red Hat Enterprise Linux 5 console  using your favorite console client, I personally use Secure CRT.  <br /><br />----<br />!!! Installation and configuration of Opensips, webmin and mysql (Phase 2)  <br /> <br />Your system should have the following packages installed  <br />*zlib-1.2.3-3.i386  <br />*openssl-0.9.8e-7.el5.i686  <br />*mysql-server-5.0.45-7.el5.i386  <br /> <br />If the above packages are not installed in your system you can install them by using yum, ie  <br />-&gt;yum install zlib openssl mysql-server  <br />[@<br />root@simulacro ~# yum install zlib openssl mysql-server  <br />@] <br /><br />Proceed to install the following packages using yum  <br />-&gt;gcc, bison, flex, zlib-devel, openssl-devel  <br />[@<br />root@simulacro ~# yum gcc bison flex zlib-devel openssl-devel  <br />@]<br /><br />Proceed to download opensips 1.5 but first I will suggest you to go to the usr/src directory and download opensips 1.5 there.  <br />[@<br />root@simulacro src# wget http://opensips.org/pub/opensips/1.5.0/src/opensips-1.5.0-notls_src.tar.gz  <br />@]<br /><br />Proceed to untar opensips  <br />[@ <br />root@simulacro src# tar -xzf opensips-1.5.0-notls_src.tar.gz  <br />@]<br /><br />Proceed to download and install webmin  <br />[@ <br />root@simulacro src# wget http://prdownloads.sourceforge.net/webadmin/webmin-1.470-1.noarch.rpm  <br />root@simulacro src# rpm -ivh webmin-1.470-1.noarch.rpm  <br />@]<br /> <br />Proceed to rename opensips-1.5.0-notls to opensips  <br />[@ <br />root@simulacro src# mv opensips-1.5.0-notls opensips  <br />@]<br />Now lets proceed to EDIT the /usr/src/opensips/Makefile using nano, so we use mysql  <br />[@<br />root@simulacro src# nano opensips/Makefile  <br />@]<br /> <br />Once in the Makefile configuration parameters, proceed to modify the following comment by removing the &quot;db_mysql&quot; module  <br />[@<br />#if not set on the cmd. line or the env, exclude this modules:  <br />exclude_modules?= jabber cpl-c xmpp rls mi_xmlrpc xcap_client \  <br />db_mysql db_postgres db_unixodbc db_oracle db_berkeley \  <br />avp_radius auth_radius group_radius uri_radius \  <br />osp perl snmpstats perlvdb peering carrierroute mmgeoip \  <br />presence presence_xml presence_mwi presence_dialoginfo \  <br />pua pua_bla pua_mi pua_usrloc pua_xmpp pua_dialoginfo \  <br />ldap h350 identity regex<br />@]<br /> <br />Your comment should now look like this  <br /> <br />[@ <br />#if not set on the cmd. line or the env, exclude this modules:  <br />exclude_modules?= jabber cpl-c xmpp rls mi_xmlrpc xcap_client \  <br />db_postgres db_unixodbc db_oracle db_berkeley \  <br />avp_radius auth_radius group_radius uri_radius \  <br />osp perl snmpstats perlvdb peering carrierroute mmgeoip \  <br />presence presence_xml presence_mwi presence_dialoginfo \  <br />pua pua_bla pua_mi pua_usrloc pua_xmpp pua_dialoginfo \  <br />ldap h350 identity regex  <br />@]<br /><br />Proceed to save the configuration in nano by using ctrl + X then y  <br /> <br />Proceed to run the following commands, but first go to /usr/src/opensips  <br />[@ <br />root@simulacro opensips#make clean  <br />root@simulacro opensips#make all include_modules=&quot;mysql&quot;  <br />root@simulacro opensips#make prefix=/usr/local install include_module=&quot;mysql&quot;  <br />@] <br /><br />Using nano proceed to edit /usr/local/etc/opensips/opensipsctlrc  <br />[@ <br />root@simulacro opensips# nano /usr/local/etc/opensips/opensipsctlrc  <br />@]<br /> <br />and proceed to modify the following comment by removing the # sign  <br /> <br />[@ <br />#database type: MYSQL, PGSQL, ORACLE, DB_BERKELEY, or DBTEXT, by def$  <br />#If you want to setup a database with opensipsdbctl, you must at leas$  <br />#this parameter.  <br />DBENGINE=MYSQL  <br />@]<br /><br />It should look like this  <br />[@<br />#database type: MYSQL, PGSQL, ORACLE, DB_BERKELEY, or DBTEXT, by def$  <br />#If you want to setup a database with opensipsdbctl, you must at leas$  <br />#this parameter.  <br />DBENGINE=MYSQL  <br />@]<br /><br />Proceed to save your file in nano using ctrl + X and Y  <br /> <br />Proceed to start mysql by typing the following command service mysqld start  <br />[@<br />root@simulacro opensips# service mysqld start  <br />Initializing MySQL database: Installing MySQL system tables...  <br />OK  <br />Filling help tables...  <br />OK  <br /> <br />To start mysqld at boot time you have to copy  <br />support-files/mysql.server to the right place for your system  <br /> <br />PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER ! <br /> <br />To do so, start the server, then issue the following commands:  <br />/usr/bin/mysqladmin -u root password 'new-password'  <br />/usr/bin/mysqladmin -u root -h simulacro.sipcorner.com password 'new-password'  <br />See the manual for more instructions.  <br />You can start the MySQL daemon with:  <br />cd /usr ; /usr/bin/mysqld_safe &amp;  <br /> <br />You can test the MySQL daemon with mysql-test-run.pl  <br />cd mysql-test ; perl mysql-test-run.pl  <br /> <br />Please report any problems with the /usr/bin/mysqlbug script!  <br /> <br />The latest information about MySQL is available on the web at  <br />http://www.mysql.com  <br />Support MySQL by buying support/licenses at http://shop.mysql.com  <br />OK  <br />Starting MySQL: OK  <br />root@simulacro opensips#  <br />@]<br /> <br />As stated above let's proceed to set up a password for the root user  <br />[@ <br />root@simulacro opensips# /usr/bin/mysqladmin -u root password yourpassword  <br />root@simulacro opensips# /usr/bin/mysqladmin -u root -h simulacro.sipcorner.com password 'yourpassword'  <br />@]<br /><br />Now lets proceed to create the database for opensips using the following command  <br />-&gt;/usr/local/sbin/opensipsdbctl create  <br />[@<br />root@simulacro opensips# /usr/local/sbin/opensipsdbctl create  <br />MySQL password for root:  <br />INFO: test server charset  <br />INFO: creating database opensips ...  <br />INFO: Core OpenSIPS tables succesfully created.  <br />Install presence related tables? (y/n): y  <br />INFO: creating presence tables into opensips ...  <br />INFO: Presence tables succesfully created.  <br />Install tables for imc cpl siptrace domainpolicy carrierroute userblacklist? (y/n): y  <br />INFO: creating extra tables into opensips ...  <br />INFO: Extra tables succesfully created.  <br />root@simulacro opensips#  <br />@]<br /><br />Now proceed to edit the opensips.cfg file<br />[@<br />root@simulacro opensips# nano /usr/local/etc/opensips/opensips.cfg  <br />@]<br /><br />Proceed to modify the following comment (remove the #)  <br />[@ <br />/* uncomment next line for MySQL DB support */  <br /> <br />#loadmodule &quot;db_mysql.so&quot;  <br />@] <br /><br />It should now look like this  <br />[@<br />/* uncomment next line for MySQL DB support */  <br />loadmodule &quot;db_mysql.so&quot;  <br />@]<br /><br />Proceed to also modify the following comment (remove couple #'s)  <br />[@<br />loadmodule &quot;acc.so&quot;  <br />/* uncomment next lines for MySQL based authentication support  <br />NOTE: a DB (like db_mysql) module must be also loaded */  <br /> <br />#loadmodule &quot;auth.so&quot;  <br />#loadmodule &quot;auth_db.so  <br />@]<br /><br />It should now look like this  <br />[@ <br />loadmodule &quot;acc.so&quot;  <br />/* uncomment next lines for MySQL based authentication support  <br />NOTE: a DB (like db_mysql) module must be also loaded */  <br />loadmodule &quot;auth.so&quot;  <br />loadmodule &quot;auth_db.so&quot;  <br />@]<br /><br />Proceed to also modify the following comment (remove the #)  <br />[@ <br />/* uncomment the following lines if you want to enable DB persistency  <br />for location entries */  <br /> <br />#modparam(&quot;usrloc&quot;, &quot;db_mode&quot;, 2)  <br />@]<br /><br />It should now look like this  <br />[@ <br />/* uncomment the following lines if you want to enable DB persistency  <br />for location entries */  <br />modparam(&quot;usrloc&quot;, &quot;db_mode&quot;, 2)  <br />@] <br /> <br />Proceed to also modify the following comment (remove couple #'s)  <br />[@ <br />/* uncomment the following lines if you want to enable the DB based  <br />authentication */  <br /> <br />#modparam(&quot;auth_db&quot;, &quot;calculate_ha1&quot;, yes)  <br />#modparam(&quot;auth_db&quot;, &quot;password_column&quot;, &quot;password&quot;)  <br />@]<br /> <br />It should now look like this  <br />[@ <br />/* uncomment the following lines if you want to enable the DB based  <br />authentication */  <br />modparam(&quot;auth_db&quot;, &quot;calculate_ha1&quot;, yes)  <br />modparam(&quot;auth_db&quot;, &quot;password_column&quot;, &quot;password&quot;)  <br />@]<br /><br />Proceed to modify the following &quot;empty spaces&quot; with your domain, in my  case I will use the ip address of this box which is 10.10.10.101, the comment is the following  <br />[@<br />#authenticate the REGISTER requests (uncomment to enable auth)<br />##if (!www_authorize(&quot;&quot;, &quot;subscriber&quot;))  <br />##{  <br />## www_challenge(&quot;&quot;, &quot;0&quot;);  <br />## exit;  <br />@]<br /><br />It should now look like this  <br />[@ <br />#authenticate the REGISTER requests (uncomment to enable auth)<br />if (!www_authorize(&quot;10.10.10.101&quot;, &quot;subscriber&quot;))  <br />{  <br />    www_challenge(&quot;10.10.10.101&quot;, &quot;0&quot;);  <br />    exit;<br />}<br />@]<br /><br />Proceed to save the file in nano by using ctrl + X and Y  <br /> <br />Great!, now lets see if we can start opensips by typing opensipsctl start  <br />[@<br />root@simulacro opensips# opensipsctl start  <br /> <br />INFO: Starting OpenSIPS :  <br />INFO: started (pid: 5474)  <br />root@simulacro opensips#  <br />@]<br /><br />And as we see above we can start successfully OpenSIPS!  <br /> <br />Now lets proceed to copy /usr/src/opensips/packaging/fedora/opensips.init to /etc/init.d/opensips by doing the following  <br />[@<br />root@simulacro opensips# cp /usr/src/opensips/packaging/fedora/opensips.init /etc/init.d/opensips  <br />root@simulacro opensips#  <br />@]<br /><br />Now lets give the proper rights to opensips, by doing the following chmod 755 /etc/init.d/opensips  <br />[@<br />root@simulacro opensips# chmod 755 /etc/init.d/opensips  <br />@]<br /> <br />Now so that we can start opensips properly, we need to make some configuration changes to /etc/init.d/opensips, using nano do the following  <br />[@<br />root@simulacro opensips# nano /etc/init.d/opensips  <br />@] <br /><br />Proceed to modify the following comment  <br />[@ <br />#Source function library.  <br />. /etc/rc.d/init.d/functions  <br /> <br />oser=/usr/sbin/opensips  <br />prog=opensips  <br />RETVAL=0  <br />@]<br /><br />It should now look like this  <br />[@ <br />#Source function library.  <br />. /etc/rc.d/init.d/functions  <br /> <br />oser=/usr/local/sbin/opensips  <br />prog=opensips  <br />RETVAL=0  <br />@]<br /> <br />Proceed to save the file using name ctrl + X and Y  <br /> <br />Now lets proceed to test service opensips start|status|stop  <br />[@ <br />root@simulacro opensips# service opensips stop  <br />Stopping opensips: OK  <br />root@simulacro opensips# service opensips status  <br />opensips is stopped  <br />root@simulacro opensips# service opensips start  <br />Starting opensips: OK  <br />root@simulacro opensips# service opensips status  <br />opensips (pid 5624 5623 5620 5618 5615 5613 5612 5610 5608 5605 5603 5602 5600 5598 5595 5594 5590) is running...  <br />root@simulacro opensips#  <br />@]<br /><br />Using nano proceed to edit the startup script /etc/init.d/opensips, proceed  to make changes to the following comment  <br />[@<br />#Startup script for OpenSIPS  <br /> <br />chkconfig: - 85 15  <br />@]<br /><br />It should now look like  <br />[@ <br />#Startup script for OpenSIPS  <br /> <br />chkconfig: 345 96 15  <br />@]<br /><br />Proceed to save the file using nano ctrl + X and Y  <br /> <br />Proceed to also do the following from the CLI  <br />[@ <br />root@simulacro opensips# chkconfig --add opensips  <br />root@simulacro opensips# chkconfig mysqld on  <br />root@simulacro ~# export SIP_DOMAIN=10.10.10.101  <br />@]<br /><br />Proceed to reboot the server to make sure opensips and mysqld starts automatically  <br /><br />[@ <br />root@simulacro opensips# reboot  <br /> <br />Broadcast message from root (pts/1) (Sun Apr 12 01:41:56 2009):  <br /> <br />The system is going down for reboot NOW!  <br />root@simulacro opensips#  <br />@] <br /> <br /> <br />Once the server have fully restarted we can proceed to add a new user,  when adding a new user, you will be asked for the opensips password,  the default opensips password is lowercase opensipsrw, I will suggest  you to look at the opensipsctlrc file, I will strongly suggest you to  change all the default values in this file, although becareful when  making changes, because it could cause opensips to stop working.  <br /> <br />To add a new user simply issue the following command  <br />-&gt;opensipsctl add newusername newuserpassword  <br />[@<br />root@simulacro src# opensipsctl add 2000 yourpassword  <br />MySQL password for user 'opensips@localhost': &lt;---enter opensipsrw  <br />new user '2000' added  <br />root@simulacro src#  <br />@]<br /><br />Using for example xlite you should now be able to register user 2000  with opensips  <br /> <br />Also you can use the command opensipsctl to access your cli options.  <br /> <br /><br />This document was created by Cesar Fiestas.</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSonRedHat-action=edit&restore=diff-1366826160-1366826160-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=edit&restore=diff:1366826160:1366826160:&preview=y">Restore</a></div></div></div>
  
<!--PageRightFmt--><!--/PageRightFmt--></td>
</tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
  <hr class="bottomline" /></td>
    <div class='footnav'>
	
      <a rel="nofollow" href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=edit  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=edit%27" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=edit">Edit</a> |
      <a rel="nofollow" href="Tutorials-OpenSIPSonRedHat-action=diff.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=diff">History</a> |
      <a rel="nofollow" href="Tutorials-OpenSIPSonRedHat-action=print.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSonRedHat?action=print" target='_blank'>Print</a> |
      <a href="RecentChanges.htm" tppabs="http://www.opensips.org/Documentation/RecentChanges">Recent Changes</a> |
      <a href="javascript:if(confirm(%27http://www.opensips.org/Site/Search  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Site/Search%27" tppabs="http://www.opensips.org/Site/Search">Search</a></div>
    <div class='lastmod'>Page last modified on May 16, 2013, at 06:16 PM</div></div>
<!--HTMLFooter-->
</div>
</body>
</html>
