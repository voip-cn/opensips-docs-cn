<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>
  <title>openSIPS | Documentation / Core MI Functions - ver 1.5 </title>
  <link rel='stylesheet' href="print.css" tppabs="http://www.opensips.org/pub/skins/print/print.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }
 
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
  <div id='printhead'>
    <h3>From openSIPS</h3>
    <h1 class='pagename'><a href="javascript:if(confirm(%27http://www.opensips.org/Documentation  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation%27" tppabs="http://www.opensips.org/Documentation">Documentation: Core MI Functions - ver 1.5 </a></h1>
  </div>
<!--PageText-->
<div id='wikitext'>
<h5>Documentation -&gt; <a class='wikilink' href="Manuals-action=print.htm" tppabs="http://www.opensips.org/Documentation/Manuals?action=print">Manuals</a> -&gt; <a class='wikilink' href="Manual-1-5-action=print.htm" tppabs="http://www.opensips.org/Documentation/Manual-1-5?action=print">Manual 1.5</a> -&gt; Core MI Functions</h5>
<hr />
<p><span style='font-size:83%'> Pages for other versions: <a class='wikilink' href="Interface-CoreMI-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-2-2?action=print">devel</a> <a class='wikilink' href="Interface-CoreMI-2-1-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-2-1?action=print">2.1</a> <a class='wikilink' href="Interface-CoreMI-1-11-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-11?action=print">1.11</a>  Older versions: <a class='wikilink' href="Interface-CoreMI-1-10-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-10?action=print">1.10</a> <a class='wikilink' href="Interface-CoreMI-1-9-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-9?action=print">1.9</a> <a class='wikilink' href="Interface-CoreMI-1-8-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-8?action=print">1.8</a> <a class='wikilink' href="Interface-CoreMI-1-7-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-7?action=print">1.7</a> <a class='wikilink' href="Interface-CoreMI-1-6-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-6?action=print">1.6</a> 1.5 <a class='wikilink' href="Interface-CoreMI-1-4-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-4?action=print">1.4</a> </span>
</p>
<p class='vspace'><br />
</p><table width='100%'><tr ><td  align='center'><span  style='color: #185662;'><span style='font-size:120%'><strong>Core MI Functions v1.5</strong></span></span></td></tr>
</table>
<div class='vspace'></div><table width='100%'><tr ><td  align='left'><a class='wikilink' href="Interface-MI-1-5-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-5?action=print">Prev</a></td><td  align='right'><a class='createlinktext' rel='nofollow' 
    href="Interface-Events-1-5-action=edit.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-1-5?action=edit">Next</a><a rel='nofollow' 
    class='createlink' href="Interface-Events-1-5-action=edit.htm" tppabs="http://www.opensips.org/Documentation/Interface-Events-1-5?action=edit">?</a></td></tr>
</table><hr />
<div class='vspace'></div><div class='tocfloat'><p><a name='toc' id='toc'></a><b>Table of Content</b> (<a id="tocidtog" href="javascript:toggle('tocid');">hide</a>)</p><ol class='toc' id='tocid'><li>1.&nbsp;<a href='#toc1'>arg</a></li><li>2.&nbsp;<a href='#toc2'>debug [level</a>]</li><li>3.&nbsp;<a href='#toc3'>kill</a></li><li>4.&nbsp;<a href='#toc4'>list_blacklists</a></li><li>5.&nbsp;<a href='#toc5'>ps</a></li><li>6.&nbsp;<a href='#toc6'>pwd</a></li><li>7.&nbsp;<a href='#toc7'>uptime</a></li><li>8.&nbsp;<a href='#toc8'>version</a></li><li>9.&nbsp;<a href='#toc9'>which</a></li><li>10.&nbsp;<a href='#toc10'>get_statistics</a></li><li>11.&nbsp;<a href='#toc11'>reset_statistics</a></li><li>12.&nbsp;<a href='#toc12'>cache_store</a></li><li>13.&nbsp;<a href='#toc13'>cache_fetch</a></li><li>14.&nbsp;<a href='#toc14'>cache_remove</a><ol class='toc'><li>14.1&nbsp;<a href='#toc15'>Comments</a></li></ol></li></ol></div>
<p>MI (management interface) functions which are exported by <strong>OpenSIPS</strong> core.
</p>
<p class='vspace'>This document is for <strong>OpenSIPS 1.5.x</strong>
</p>
<div class='vspace'></div><h4><a name='toc1' id='toc1'></a>1.&nbsp;arg</h4>
<p>Returns the full list of arguments used when <strong>OpenSIPS</strong> was started. As in UNIX, the first argument is the name of executable binary.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: multiple MI nodes where each node contains an argument. The MI nodes have no name, but only value.
</p>
<p class='vspace'>Example of usage:
</p><pre class='escaped'>
    # opensipsctl fifo arg
    ./opensips
    -f
    /etc/openser/test.cfg

</pre>
<div class='vspace'></div><h4><a name='toc2' id='toc2'></a>2.&nbsp;debug [level]</h4>
<p>Gets or sets the value of the debug core variable. You may use it to dynamically (at runtime) change  or inspect the debug level of your <strong>OpenSIPS</strong>. If no argument is passed, the function will fetch the value of the debug level.<br /><strong>Arguments</strong>: debug level (-3...4)<br /><strong>Output</strong>: debug level (only when no argument is passed). The value will be returned as a single MI node with name "DEBUG"
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo debug
    DEBUG:: 4
    # opensipsctl fifo debug 1
</pre>
<div class='vspace'></div><h4><a name='toc3' id='toc3'></a>3.&nbsp;kill</h4>
<p>The command will terminate <strong>OpenSIPS</strong> (and internal shutdown).<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: none
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo kill
</pre>
<div class='vspace'></div><h4><a name='toc4' id='toc4'></a>4.&nbsp;list_blacklists</h4>
<p>The command lists all the defined (static or learned) blacklists from <strong>OpenSIPS</strong>.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: an MI tree - first level (nodes named "List") will describe the list (name, owner, flags); Second level (nodes named "Rules) will describe the rules (blacklists) for each list (IP/mask, protocol, port, matching regexp, flags)
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo list_blacklists
</pre>
<div class='vspace'></div><h4><a name='toc5' id='toc5'></a>5.&nbsp;ps</h4>
<p>The command will list all all <strong>OpenSIPS</strong> processes, along with type and description.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: multiple MI nodes (named "Process") - each node contains process ID (internal), PID (OS), Type and description 
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo ps
    Process::  ID=0 PID=16224 Type=attendant
    Process::  ID=1 PID=16225 Type=SIP receiver udp:192.168.1.2:5060 
    Process::  ID=2 PID=16226 Type=timer
    Process::  ID=3 PID=16227 Type=MI FIFO
    Process::  ID=4 PID=16228 Type=TCP receiver
    Process::  ID=5 PID=16230 Type=TCP main
</pre>
<div class='vspace'></div><h4><a name='toc6' id='toc6'></a>6.&nbsp;pwd</h4>
<p>Prints the working directory of <strong>OpenSIPS</strong> instance.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: a single MI node with name "WD" containing the working directory full path.
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo pwd
    WD:: /
</pre>
<div class='vspace'></div><h4><a name='toc7' id='toc7'></a>7.&nbsp;uptime</h4>
<p>Prints various time information about <strong>OpenSIPS</strong> - when it started to run, for how long it runs.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: three MI nodes: "Now" - current time; "Up since" - start time ; "Up time" - number of seconds since started.
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo uptime
    Now:: Mon Jul 21 17:41:03 2008
    Up since:: Mon Jul 21 17:36:33 2008
    Up time:: 270 [sec]
</pre>
<div class='vspace'></div><h4><a name='toc8' id='toc8'></a>8.&nbsp;version</h4>
<p>Prints the version string of a running<strong>OpenSIPS</strong>.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: one MI node (named "Server") containing the version string.
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo version
    Server:: OpenSIPS (1.4.0dev14-notls (i386/linux))
</pre>
<div class='vspace'></div><h4><a name='toc9' id='toc9'></a>9.&nbsp;which</h4>
<p>Prints all available MI commands from the queried <strong>OpenSIPS</strong>instance.<br /><strong>Arguments</strong>: none<br /><strong>Output</strong>: multiple MI nodes (no name), each node containing (as value) the name of an available MI command. NOTE that the list of available MI commands may differ depending of what modules your <strong>OpenSIPS</strong> is using.
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo which
    get_statistics
    reset_statistics
    uptime
    version
    pwd
    arg
    which
    ps
    kill
    debug
    list_blacklists
    ul_rm
    ul_rm_contact
    ul_dump
    ul_flush
    ul_add
    ul_show_contact
    nh_enable_ping
    nh_enable_rtpp
</pre>
<div class='vspace'></div><h4><a name='toc10' id='toc10'></a>10.&nbsp;get_statistics</h4>
<p>Prints the statistics (all, group or one) realtime values.<br /><strong>Arguments</strong>: input may be "all" - print all available statistics; "group:" - print only statistics from a certain group; "name" - print only this statistic. The <strong>OpenSIPS</strong> core defines the following groups: <em>core</em>, <em>shmem</em>; Modules export groups typically named like the module itself.<br /><strong>Output</strong>: list of MI nodes (no name) - each MI mode contains the name and value of a single statistic variable.
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo get_statistics rcv_requests
    core:rcv_requests = 35243
    # opensipsctl fifo get_statistics shmem:      
    shmem:total_size = 33554432
    shmem:used_size = 1686952
    shmem:real_used_size = 1704592
    shmem:max_used_size = 1704592
    shmem:free_size = 31849840
    shmem:fragments = 1
    # opensipsctl fifo get_statistics all
    ....
</pre>
<div class='vspace'></div><h4><a name='toc11' id='toc11'></a>11.&nbsp;reset_statistics</h4>
<p>Reset (to zero) the value of a statistic variable. Note that not all variables allow reset (depending of the nature of the information they carry - example "shmem:used_size").<br /><strong>Arguments</strong>: name of the variable to be reset.<br /><strong>Output</strong>: none.
</p>
<p class='vspace'>Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo get_statistics received_replies
    core:received_replies = 14543
    # opensipsctl fifo reset_statistics received_replies
    # opensipsctl fifo get_statistics received_replies
    core:received_replies = 0
</pre>
<div class='vspace'></div><h4><a name='toc12' id='toc12'></a>12.&nbsp;cache_store</h4>
<p>This command stores in a cache system a string value.<br /><strong>Arguments</strong>: <br />   - cache system to use - for the cache system implemented by <strong>OpenSIPS</strong> module 'localcache' the value of this parameter should be 'local' <br />   - the label to be associated with this value <br />   - the string to be stored <br /><strong>Output</strong>: none. <br />
Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo cache_store local password_user1 password
</pre>
<div class='vspace'></div><h4><a name='toc13' id='toc13'></a>13.&nbsp;cache_fetch</h4>
<p>This command queries for a stored value.<br /><strong>Arguments</strong>: <br />   - cache system to use - for the cache system implemented by <strong>OpenSIPS</strong> module 'localcache' the value of this parameter should be 'local' <br />   - the label associated with the value <br /><strong>Output</strong>: MI tree containing the value if a record is found or 'Value not found' string otherwise.<br />
Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo cache_fetch local password_user1
</pre>
<div class='vspace'></div><h4><a name='toc14' id='toc14'></a>14.&nbsp;cache_remove</h4>
<p>This command removes a record from the cache system.<br /><strong>Arguments</strong>: <br />   - cache system to use<br />  - the label associated with the stored value <br /><strong>Output</strong>: None.<br />Examples of usage:
</p><pre class='escaped'>
    # opensipsctl fifo cache_remove local password_user1
</pre>
<div class='vspace'></div><hr />
<h3><a name='toc15' id='toc15'></a>14.1&nbsp;Comments</h3>
<p class='vspace'><a name='comment1' id='comment1'></a>
</p><div class='messagehead' > 
<h5><a class='createlinktext' rel='nofollow' 
    href="javascript:if(confirm(%27http://www.opensips.org/Profiles/AndreasSikkema?action=edit  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Profiles/AndreasSikkema?action=edit%27" tppabs="http://www.opensips.org/Profiles/AndreasSikkema?action=edit">Andreas Sikkema</a><a rel='nofollow' 
    class='createlink' href="javascript:if(confirm(%27http://www.opensips.org/Profiles/AndreasSikkema?action=edit  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Profiles/AndreasSikkema?action=edit%27" tppabs="http://www.opensips.org/Profiles/AndreasSikkema?action=edit">?</a>  &mdash;  <span style='font-size:83%'>29 September 2009, 13:39</span>  </h5>
</div><div class='messageitem' > 
<p>The examples for cache-* are not complete and will not wok as is. The need a parameter to tell the fucntion which cache store should be used.
</p>
<div class='vspace'></div><ol><li>opensipsctl fifo cache_remove password_user1
</li></ol><p class='vspace'>should be (for example)
</p>
<div class='vspace'></div><ol><li>opensipsctl fifo cache_remove local password_user1
</li></ol><p class='vspace'><span  style='color: blue;'>[By Bogdan] Thank you Andreas, I made the fix in the docs</span>
</p></div>
<div class='vspace'></div>
    <div id='message'><form name='cbox' class='inputform' action="http://www.opensips.org/Documentation/Interface-CoreMI-1-5" method='post' onsubmit='return checkform(this);'>
    <input type='hidden' name='n' value='Documentation.Interface-CoreMI-1-5' />
    <input type='hidden' name='action' value='comment' />
    <input type='hidden' name='order' value='chrono' /><input type='hidden' name='accesscode' value='258' />
    <input type='hidden' name='csum' value='Comment added' />
    <table width='90%'><tr>
    <th class='prompt' align='right' valign='top'>Add Comment&nbsp;</th>
    <td><textarea class='inputtext commenttext' name='text' id='text' rows=6 cols=40></textarea>
    </td></tr><tr><th class='prompt' align='right' valign='top'>Sign as Author&nbsp;</th>
    <td><input class='inputbox commentauthorbox' type='text' name='author' value='' size='32' /></td></tr>
    <tr><th class='prompt' align='right' valign='top'>Enter code <em class='access'>258</em></th>
    <td><input type='text' size='4' maxlength='3' name='access' value='' class='inputbox' /> <input class='inputbutton commentbutton' type='submit' name='post' value=' Post ' />
    <input class='inputbutton commentbutton' type='reset' value='Reset' /></td></tr></table><br /></form></div>
 <script type='text/javascript' language='JavaScript1.2'>
  function checkform ( form ) {
   if (form.text && form.text.value == "") { window.alert( 'Please enter a comment to post' ); form.text.focus(); return false; }
   if (form.author && form.author.value == "") { window.alert( 'Please enter your name as author' ); form.author.focus(); return false; }
   if (form.access && form.access.value == "") { window.alert( 'Please enter the code number' ); form.access.focus(); return false; }return true ;
  }
  </script>
   
</div>

  <div id='printfoot'>
    <div class='from'>Retrieved from http://www.opensips.org/Documentation/Interface-CoreMI-1-5</div>
    <div class='lastmod'>Page last modified on August 05, 2013, at 03:20 PM</div></div>
<!--HTMLFooter-->
</body>
</html>
