<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>
  <title>openSIPS | Documentation / Statistics Interface - 2.2</title>
  <link rel='stylesheet' href="print.css" tppabs="http://www.opensips.org/pub/skins/print/print.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }
 
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
  <div id='printhead'>
    <h3>From openSIPS</h3>
    <h1 class='pagename'><a href="javascript:if(confirm(%27http://www.opensips.org/Documentation  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation%27" tppabs="http://www.opensips.org/Documentation">Documentation: Statistics Interface - 2.2</a></h1>
  </div>
<!--PageText-->
<div id='wikitext'>
<h5>Documentation -&gt; <a class='wikilink' href="Manuals-action=print.htm" tppabs="http://www.opensips.org/Documentation/Manuals?action=print">Manuals</a> -&gt; <a class='wikilink' href="Manual-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Manual-2-2?action=print">Manual devel</a> -&gt; Statistics Interface</h5>
<hr />
<p><span style='font-size:83%'> Pages for other versions: devel <a class='wikilink' href="Interface-Statistics-2-1-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-2-1?action=print">2.1</a> <a class='wikilink' href="Interface-Statistics-1-11-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-11?action=print">1.11</a>  Older versions: <a class='wikilink' href="Interface-Statistics-1-10-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-10?action=print">1.10</a> <a class='wikilink' href="Interface-Statistics-1-9-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-9?action=print">1.9</a> <a class='wikilink' href="Interface-Statistics-1-8-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-8?action=print">1.8</a> <a class='wikilink' href="Interface-Statistics-1-7-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-7?action=print">1.7</a> <a class='wikilink' href="Interface-Statistics-1-6-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-6?action=print">1.6</a> <a class='wikilink' href="Interface-Statistics-1-5-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-5?action=print">1.5</a> <a class='wikilink' href="Interface-Statistics-1-4-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-Statistics-1-4?action=print">1.4</a> </span>
</p>
<p class='vspace'><br />
</p><table width='100%'><tr ><td  align='center'><span  style='color: #185662;'><span style='font-size:120%'><strong>Statistics Interface v2.2 </strong></span></span></td></tr>
</table>
<div class='vspace'></div><table width='100%'><tr ><td  align='left'><a class='wikilink' href="Interface-CoreEvents-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreEvents-2-2?action=print">Prev</a></td><td  align='right'><a class='wikilink' href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Interface-CoreStatistics-2-2?action=print  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Interface-CoreStatistics-2-2?action=print%27" tppabs="http://www.opensips.org/Documentation/Interface-CoreStatistics-2-2?action=print">Next</a></td></tr>
</table><hr />
<p class='vspace'>The <strong>Statistics Interface</strong> is an OpenSIPS interface that provides access to various internal statistics of OpenSIPS. The statistic provide useful information about what is going on inside OpenSIPS - this can be used by external applications, for monitoring purposes, load evaluation, realtime integration with other services. The values of statistic variables are exclusively numerical.
</p>
<div class='vspace'></div><hr />
<h4>Overview</h4>
<p><strong>OpenSIPS</strong> typically provides two types of statistic variables:
</p><ol><li>counter like - variables that keep counting things that happened in OpenSIPS, like received requests, processed dialogs, failed DB queries, etc
</li><li>computed values - variables that are calculated in realtime, like how much memory is used, the current load, active dialogs, active transactions, etc
</li></ol><p class='vspace'>The statistic variables are not restart persistent, they all start with a 0 value (the counter like variables). The <em>counter like</em> statistics can also be reset (to 0 value) during OpenSIPS runtime.
</p>
<p class='vspace'>In OpenSIPS, the statistics variables are grouped in different sets, depending on their purposes or how is providing them. For example, the OpenSIPS core provides the <strong>shmem</strong>, <strong>load</strong>, <strong>net</strong>, etc groups, while each OpenSIPS module provides its own group (typically the group has the same name as the module).
</p>
<p class='vspace'>All available statistic variables are listed and documented : statistics provided <a class='wikilink' href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Interface-CoreStatistics-2-2?action=print  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Interface-CoreStatistics-2-2?action=print%27" tppabs="http://www.opensips.org/Documentation/Interface-CoreStatistics-2-2?action=print">by OpenSIPS core</a> or by <a class='wikilink' href="Modules-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Modules-2-2?action=print">OpenSIPS modules</a> (see the Statistics chapter for each module).
</p>
<div class='vspace'></div><hr />
<h4>Usage</h4>
<p>To get access to the statistics you have to use the <a class='wikilink' href="Interface-MI-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-2-2?action=print">MI interface</a> which provides (directly from OpenSIPS core) several MI functions for:<br /><br /><strong>Fetching the value</strong> of a statistic variable, of an entire group of variables or of all variables. The MI <a class='wikilink' href="Interface-CoreMI-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-2-2?action=print">get_statistics</a> command can be used here:
</p><pre class='escaped'>
   # get one statistic variable, by name
   &gt; opensipsctl fifo get_statistics rcv_requests
   &gt; core:rcv_requests = 3428
   &gt; opensipsctl fifo get_statistics real_used_size 
   &gt; shmem:real_used_size = 2951864

   # get various statistic variables, by list of names
   &gt; opensipsctl fifo get_statistics rcv_requests inuse_transactions
   &gt; core:rcv_requests = 453
   &gt; tm:inuse_transactions = 10


   # get all stats from a group
   &gt; opensipsctl fifo get_statistics shmem:
   &gt; shmem:total_size = 33554432
   &gt; shmem:used_size = 2897024
   &gt; shmem:real_used_size = 2951864
   &gt; shmem:max_used_size = 2952304
   &gt; shmem:free_size = 30602568
   &gt; shmem:fragments = 26

   # get all stats from OpenSIPS
   &gt; opensipsctl fifo get_statistics all
   &gt;...........
</pre>
<p><br /><strong>Reseting the value</strong> of a statistic variable (to 0 value), but only if it is counter-type variable.
</p><div class='round lrindent important' > 
<p>Reseting a computed-value statistic will be ignored and have no effect.
</p></div>
<pre> The MI <a class='wikilink' href="Interface-CoreMI-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-2-2?action=print">reset_statistics</a> command can be used here:
</pre><div class='vspace'></div><pre class='escaped'>
   # reset one statistic variable, by name
   &gt; opensipsctl fifo reset_statistics rcv_requests
</pre>
</div>

  <div id='printfoot'>
    <div class='from'>Retrieved from http://www.opensips.org/Documentation/Interface-Statistics-2-2</div>
    <div class='lastmod'>Page last modified on March 20, 2014, at 07:58 PM</div></div>
<!--HTMLFooter-->
</body>
</html>
