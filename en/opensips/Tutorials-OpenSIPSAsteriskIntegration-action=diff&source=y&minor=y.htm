<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>openSIPS | Documentation / Tutorials-OpenSIPSAsteriskIntegration | History</title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href="opensips.css" tppabs="http://www.opensips.org/pub/skins/opensips/opensips.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  .diffbox { width:570px; border-left:1px #999999 solid; margin-top:1.33em; }
  .diffauthor { font-weight:bold; }
  .diffchangesum { font-weight:bold; }
  .difftime { font-family:verdana,sans-serif; font-size:66%; 
    background-color:#dddddd; }
  .difftype { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; font-weight:bold; }
  .diffadd { border-left:5px #99ff99 solid; padding-left:5px; }
  .diffdel { border-left:5px #ffff99 solid; padding-left:5px; }
  .diffrestore { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; margin:1.5em 0px; }
  .diffmarkup { font-family:monospace; }  
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

  <link rel="icon" type="image/png" href="http://opensips.org/favicon.png">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','analytics.js'/*tpa=http://www.google-analytics.com/analytics.js*/,'ga');

  ga('create', 'UA-47615177-1', 'http://www.opensips.org/Documentation/opensips.org');
  ga('send', 'pageview');

	function resizeIframe(obj) {
	    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
		  }

  </script>

</head>
<body>
<div id="main">
<!--PageHeaderFmt-->
  <div id='wikilogo'>
  <img class="motto" src="motto.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/motto.jpg" width="328" height="40" alt="The new breed of communication engine.">
  <a href="javascript:if(confirm(%27http://www.opensips.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/%27" tppabs="http://www.opensips.org/"><img class="logo" src="logo2.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/logo2.jpg"
    alt='openSIPS' border='0' /></a>
 </div>
 <div id='wikihead'>
 <table border=0>
  <tr valign=top><td width=250>
   
  </td></tr>
  <tr><td width=250>
   <form action="http://www.opensips.org/">
   
    <input type='hidden' name='n' value='Documentation.Tutorials-OpenSIPSAsteriskIntegration' />
    <input type='hidden' name='action' value='search' />

    <input type='text' name='q' id='formsubmit' value='' class='inputbox searchbox' />
	<input type='submit' id='formbutton' class='inputbutton searchbutton' value=' ' /></form>
  </td></tr>
  </table>
 </div>

<!--/PageHeaderFmt-->
<div id="osTopNav" >
	<div id="osTopNavLeft">
	</div>

	<div id="osTopNavRight">
	</div>

	<ul id="osTopNavList">
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/About/About  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/About/About%27" tppabs="http://www.opensips.org/About/About" title="About">About</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Downloads/Downloads  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Downloads/Downloads%27" tppabs="http://www.opensips.org/Downloads/Downloads" title="Download">Downloads</a>
		</li>
		<li>
			<a href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals" title="Documentation">Documentation</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Community/Foundation-Main  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Community/Foundation-Main%27" tppabs="http://www.opensips.org/Community/Foundation-Main" title="Community">Community</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Development/Development  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Development/Development%27" tppabs="http://www.opensips.org/Development/Development" title="Development">Development</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Support/Contact  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Support/Contact%27" tppabs="http://www.opensips.org/Support/Contact" title="Support">Support</a>
		</li>
	</ul>
</div>
<!--PageMenuFmt-->
<!--/PageMenuFmt-->
  <table width='100%' align="center" cellpadding='0' cellspacing='0' id='wikimid'>
    <tr>
<!--PageLeftFmt-->
      <td valign='top' bgcolor="#E2F8DA" id='wikileft'>
        <p class='sidehead'> <span  style='color: #185662;'> Documentation</span>
</p><ul><li><a class='wikilink' title='Manuals' href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals">Manuals</a>
</li><li><a class='wikilink' title='Tutorials' href="Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Tutorials">Advanced Tutorials</a>
</li><li><a class='wikilink' title='TipsFAQ' href="TipsFAQ.htm" tppabs="http://www.opensips.org/Documentation/TipsFAQ">Tips &amp; FAQ</a>
</li><li><a class='wikilink' title='Migration' href="Migration.htm" tppabs="http://www.opensips.org/Documentation/Migration">Version Migration</a>
</li><li><a class='wikilink' title='Webinars' href="Webinars.htm" tppabs="http://www.opensips.org/Documentation/Webinars">OpenSIPS Webinars</a>
</li><li><a class='wikilink' title='Troubleshooting' href="Troubleshooting.htm" tppabs="http://www.opensips.org/Documentation/Troubleshooting">Troubleshooting</a>
</li><li><a class='wikilink' title='Tools' href="Tools.htm" tppabs="http://www.opensips.org/Documentation/Tools">OpenSIPS Tools</a>
</li><li><a class='wikilink' title='Development-Tutorials' href="Development-Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Development-Tutorials">Devel Tutorial</a>
</li></ul><div class='vspace'></div>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageTitleFmt-->
        
<!--PageText-->
<div id='wikitext'>
<h2 class='wikiaction'>Documentation.Tutorials-OpenSIPSAsteriskIntegration History</h2>
  <p><a href="Tutorials-OpenSIPSAsteriskIntegration-action=diff&source=y&minor=n.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=diff&source=y&minor=n">Hide minor edits</a> - <a href="Tutorials-OpenSIPSAsteriskIntegration-action=diff&source=n&minor=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=diff&source=n&minor=y">Show changes to output</a></p>
  <div id='wikidiff'>
      <div class='diffbox'><div class='difftime'>June 22, 2015, at 08:18 AM 
        by <span class='diffauthor' title='94.79.218.122'>click_tichotmailcom</span> - Comment added</div>
        <div class='difftype'>Added lines 1203-1215:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment37]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~click_tic@hotmail.com]]  &amp;mdash;  [-22 June 2015, 08:18-]  <br />&gt;&gt;messageitem&lt;&lt;<br />I have asterisk 1.8.7, got the following warnings:<br />[Jun 22 09:06:50] WARNING[2280] res_config_odbc.c: Realtime table sipusers2@asterisk: column 'port' is not long enough to contain realtime data (needs 5)<br />[Jun 22 09:06:50] WARNING[2280] res_config_odbc.c: Realtime table sipusers2@asterisk: column 'regseconds' is not long enough to contain realtime data (needs 11)<br />[Jun 22 09:06:50] WARNING[2280] res_config_odbc.c: Realtime table sipusers2@asterisk requires column 'defaultuser', but that column does not exist!<br />[Jun 22 09:06:50] WARNING[2280] res_config_odbc.c: Realtime table sipusers2@asterisk requires column 'fullcontact', but that column does not exist!<br />[Jun 22 09:06:50] WARNING[2280] res_config_odbc.c: Realtime table sipusers2@asterisk requires column 'regserver', but that column does not exist!<br />[Jun 22 09:06:50] WARNING[2280] res_config_odbc.c: Realtime table sipusers2@asterisk requires column 'useragent', but that column does not exist!<br /></div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1434953903-1421763753-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1434953903:1421763753:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>January 20, 2015, at 03:22 PM 
        by <span class='diffauthor' title='80.222.44.46'>dansku</span> - Comment added</div>
        <div class='difftype'>Added lines 1195-1202:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment36]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~dansku]]  &amp;mdash;  [-20 January 2015, 15:22-]  <br />&gt;&gt;messageitem&lt;&lt;<br />why do i ger an error when i enter the following through the myqsl command line to the asterisk database<br />alter table subscriber add column `email_address` varchar(50) NOT NULL default '';<br />Someone help me please :D</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1421763753-1403686636-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1421763753:1403686636:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>June 25, 2014, at 10:57 AM 
        by <span class='diffauthor' title='89.120.101.121'>89.120.101.121</span> - </div>
        <div class='difftype'>Changed lines 1192-1226 from:</div>
        <div class='diffdel'><div class='diffmarkup'>May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/<br />May 17 17:21:29 [15662] ERROR:core:sr_load_module: could not open module &amp;lt;/usr/local/lib/opensips/modules/&amp;gt;: /usr/local/lib/opensips/modules/: cannot read file data: Is a directory<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 37, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/uri.so<br />May 17 17:21:29 [15662] ERROR:core:yyparse: module 'xlog.so' not found in '/usr/local/lib/opensips/modules/'<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 39, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/<br />May 17 17:21:29 [15662] ERROR:core:sr_load_module: could not open module &amp;lt;/usr/local/lib/opensips/modules/&amp;gt;: /usr/local/lib/opensips/modules/: cannot read file data: Is a directory<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 39, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/acc.so<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/auth.so<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/auth_db.so<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/domain.so<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: mi_fifo matches module mi_fifo<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;fifo_name&amp;gt; in module mi_fifo [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: rr matches module rr<br />May 17 17:21:29 [15662] ERROR:core:set_mod_param_regex: parameter &amp;lt;enable_full_lr&amp;gt; not found in module &amp;lt;rr&amp;gt;<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 53, column 19-20: Parameter &amp;lt;enable_full_lr&amp;gt; not found in module &amp;lt;rr&amp;gt; - can't set<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: rr matches module rr<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;append_fromtag&amp;gt; in module rr [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: usrloc matches module usrloc<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;db_mode&amp;gt; in module usrloc [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: usrloc matches module usrloc<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;db_url&amp;gt; in module usrloc [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] ERROR:core:set_mod_param_regex: no module matching uri_db found<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 63, column 19-20: Parameter &amp;lt;use_uri_table&amp;gt; not found in module &amp;lt;uri_db&amp;gt; - can't set<br />May 17 17:21:29 [15662] ERROR:core:set_mod_param_regex: no module matching uri_db found<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 64, column 20-21: Parameter &amp;lt;db_url&amp;gt; not found in module &amp;lt;uri_db&amp;gt; - can't set<br /><br />&gt;&gt;&lt;&lt;<br /><br />[[#comment36]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~cheap seo services]]  &amp;mdash;  [-18 June 2014, 18:39-]  <br />&gt;&gt;messageitem&lt;&lt;<br />FI3zCl Looking forward to reading more. Great blog article.Thanks Again. Want more.</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>[...truncated...]<br /><br />%blue%[bogdan] - please us the OpenSIPS Users mailing list for this request.%%</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1403686636-1403109571-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1403686636:1403109571:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>June 18, 2014, at 06:39 PM 
        by <span class='diffauthor' title='37.233.27.142'>cheap seo services</span> - Comment added</div>
        <div class='difftype'>Added lines 1221-1226:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment36]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~cheap seo services]]  &amp;mdash;  [-18 June 2014, 18:39-]  <br />&gt;&gt;messageitem&lt;&lt;<br />FI3zCl Looking forward to reading more. Great blog article.Thanks Again. Want more.</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1403109571-1400318960-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1403109571:1400318960:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 17, 2014, at 11:29 AM 
        by <span class='diffauthor' title='175.9.97.118'>asteriskman</span> - Comment added</div>
        <div class='difftype'>Added lines 1183-1220:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment35]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~asteriskman]]  &amp;mdash;  [-17 May 2014, 11:29-]  <br />&gt;&gt;messageitem&lt;&lt;<br />hello:<br />i follow this doc, but startup failed. I missed some modules:<br />17:21:29 [15662] ERROR:core:yyparse: module 'uri_db.so' not found in '/usr/local/lib/opensips/modules/'<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 37, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/<br />May 17 17:21:29 [15662] ERROR:core:sr_load_module: could not open module &amp;lt;/usr/local/lib/opensips/modules/&amp;gt;: /usr/local/lib/opensips/modules/: cannot read file data: Is a directory<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 37, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/uri.so<br />May 17 17:21:29 [15662] ERROR:core:yyparse: module 'xlog.so' not found in '/usr/local/lib/opensips/modules/'<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 39, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/<br />May 17 17:21:29 [15662] ERROR:core:sr_load_module: could not open module &amp;lt;/usr/local/lib/opensips/modules/&amp;gt;: /usr/local/lib/opensips/modules/: cannot read file data: Is a directory<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 39, column 13-14: failed to load module<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/acc.so<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/auth.so<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/auth_db.so<br />May 17 17:21:29 [15662] DBG:core:yyparse: loading module /usr/local/lib/opensips/modules/domain.so<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: mi_fifo matches module mi_fifo<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;fifo_name&amp;gt; in module mi_fifo [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: rr matches module rr<br />May 17 17:21:29 [15662] ERROR:core:set_mod_param_regex: parameter &amp;lt;enable_full_lr&amp;gt; not found in module &amp;lt;rr&amp;gt;<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 53, column 19-20: Parameter &amp;lt;enable_full_lr&amp;gt; not found in module &amp;lt;rr&amp;gt; - can't set<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: rr matches module rr<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;append_fromtag&amp;gt; in module rr [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: usrloc matches module usrloc<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;db_mode&amp;gt; in module usrloc [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: usrloc matches module usrloc<br />May 17 17:21:29 [15662] DBG:core:set_mod_param_regex: found &amp;lt;db_url&amp;gt; in module usrloc [/usr/local/lib/opensips/modules/]<br />May 17 17:21:29 [15662] ERROR:core:set_mod_param_regex: no module matching uri_db found<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 63, column 19-20: Parameter &amp;lt;use_uri_table&amp;gt; not found in module &amp;lt;uri_db&amp;gt; - can't set<br />May 17 17:21:29 [15662] ERROR:core:set_mod_param_regex: no module matching uri_db found<br />May 17 17:21:29 [15662] CRITICAL:core:yyerror: parse error in config file /usr/local/etc/opensips/opensips.cfg, line 64, column 20-21: Parameter &amp;lt;db_url&amp;gt; not found in module &amp;lt;uri_db&amp;gt; - can't set<br /></div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1400318960-1398156578-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1400318960:1398156578:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>April 22, 2014, at 10:49 AM 
        by <span class='diffauthor' title='89.120.101.121'>89.120.101.121</span> - </div>
        <div class='difftype'>Deleted lines 1182-1187:</div>
        <div class='diffdel'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment35]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~stunning seo guys]]  &amp;mdash;  [-20 April 2014, 20:47-]  <br />&gt;&gt;messageitem&lt;&lt;<br />MT1zCl I really liked your blog. Will read on...</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1398156578-1398019656-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1398156578:1398019656:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>April 20, 2014, at 08:47 PM 
        by <span class='diffauthor' title='93.116.187.104'>stunning seo guys</span> - Comment added</div>
        <div class='difftype'>Added lines 1183-1188:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment35]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~stunning seo guys]]  &amp;mdash;  [-20 April 2014, 20:47-]  <br />&gt;&gt;messageitem&lt;&lt;<br />MT1zCl I really liked your blog. Will read on...</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1398019656-1394608435-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1398019656:1394608435:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>March 12, 2014, at 08:13 AM 
        by <span class='diffauthor' title='81.22.20.117'>Mostafa</span> - Comment added</div>
        <div class='difftype'>Added lines 1174-1182:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment34]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Mostafa]]  &amp;mdash;  [-12 March 2014, 08:13-]  <br />&gt;&gt;messageitem&lt;&lt;<br />I have integrated asterisk PBX as a voicemail server with openSIPs but when I make &quot;allowsubscribe=yes&quot; in asterisk PBX to get the voicemail MWI, I found too many messages like:<br /> doing dnsmgr_lookup for 'sip.domain.com'<br /><br />How can I get rid of it?</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1394608435-1381409522-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1394608435:1381409522:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>October 10, 2013, at 02:52 PM 
        by <span class='diffauthor' title='202.83.16.217'>sivakumar</span> - Comment added</div>
        <div class='difftype'>Added lines 1162-1173:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment33]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~sivakumar]]  &amp;mdash;  [-10 October 2013, 14:52-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi,<br />I am new to OpenSIPS integration with Asterisk. I am successful to install opensips in centos machine. But, coming to asterisk integration I didn't get the right path. Where can i find exact file to configure connection between ASTERISK and OPENSIPS.<br />I did followed all the steps in this tutorial. And I registered, a sip in  my zoipher software. When I am testing VoiceMail, it doesn't seems like what mentioned in this tutorial.<br /><br />Can any one help me please!<br /><br />Thanks</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1381409522-1368720427-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1381409522:1368720427:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 16, 2013, at 06:07 PM 
        by <span class='diffauthor' title='109.99.235.212'>109.99.235.212</span> - </div>
        <div class='difftype'>Changed line 1 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!![[Documentation.Index | Documentation]] -&gt; [[Documentation.Tutorials | Tutorials ]] -&gt; [[Documentation.Tutorials-OpenSIPSAsteriskIntegration |  Realtime OpenSIPS - Asterisk Integration]]</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!!!!!Documentation -&gt; [[Documentation.Tutorials | Tutorials ]] -&gt; Realtime OpenSIPS - Asterisk Integration</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1368720427-1368100632-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368720427:1368100632:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 01:57 PM 
        by <span class='diffauthor' title='79.118.227.150'>79.118.227.150</span> - </div></div>
      <div class='diffrestore'><a href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100632:1368100607:&preview=y  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100632:1368100607:&preview=y%27" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100632:1368100607:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 01:56 PM 
        by <span class='diffauthor' title='79.118.227.150'>79.118.227.150</span> - </div>
        <div class='difftype'>Changed line 1 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!![[Documentation.Index | Documentation]] -&gt; [[Documentation.Tutorials-OpenSIPSAsteriskIntegration |  Realtime OpenSIPS - Asterisk Integration]]</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!![[Documentation.Index | Documentation]] -&gt; [[Documentation.Tutorials | Tutorials ]] -&gt; [[Documentation.Tutorials-OpenSIPSAsteriskIntegration |  Realtime OpenSIPS - Asterisk Integration]]</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1368100607-1368100551-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100607:1368100551:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 01:55 PM 
        by <span class='diffauthor' title='79.118.227.150'>79.118.227.150</span> - </div>
        <div class='difftype'>Changed lines 1-2 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!!Resources -&gt; [[Resources.Documentation | Documentation]] -&gt; [[Resources.DocsTutorials | Tutorials]] -&gt; Realtime OpenSIPS - Asterisk Integration</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!![[Documentation.Index | Documentation]] -&gt; [[Documentation.Tutorials-OpenSIPSAsteriskIntegration |  Realtime OpenSIPS - Asterisk Integration]]<br />----</div></div></div>
      <div class='diffrestore'><a href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100551:1368087323:&preview=y  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100551:1368087323:&preview=y%27" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368100551:1368087323:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 10:15 AM 
        by <span class='diffauthor' title='109.99.235.212'>bogdan</span> - </div>
        <div class='difftype'>Changed line 1152 from:</div>
        <div class='diffdel'><div class='diffmarkup'>%blue%[bogdan] - as OpenSIPS and Asterisk communicate via SIP, they can be on different servers. %%</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>%blue%[bogdan] - latest version can be found [[Documentation/Tutorials-OpenSIPSAsteriskIntegration-1-8|here]]. %%</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1368087323-1368087248-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368087323:1368087248:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 10:14 AM 
        by <span class='diffauthor' title='109.99.235.212'>bogdan</span> - </div>
        <div class='difftype'>Added lines 1150-1152:</div>
        <div class='diffadd'><div class='diffmarkup'><br /><br />%blue%[bogdan] - as OpenSIPS and Asterisk communicate via SIP, they can be on different servers. %%</div></div>
        <div class='difftype'>Added lines 1159-1160:</div>
        <div class='diffadd'><div class='diffmarkup'><br />%blue%[bogdan] - as OpenSIPS and Asterisk communicate via SIP, they can be on different servers. %%</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1368087248-1368082948-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368087248:1368082948:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 09:02 AM 
        by <span class='diffauthor' title='91.93.189.38'>betul</span> - Comment added</div>
        <div class='difftype'>Added lines 1150-1155:</div>
        <div class='diffadd'><div class='diffmarkup'>&gt;&gt;&lt;&lt;<br /><br />[[#comment32]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~betul]]  &amp;mdash;  [-09 May 2013, 09:02-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi I'm new on opensips.And I have serious problems about its logic.Do opensips and asterisk have to be on the same server?And is there a way to write logs on osipsconsole for troubleshooting purpose? I need sth like NOOP in asterisk?</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1368082948-1366821754-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1368082948:1366821754:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>April 24, 2013, at 06:42 PM 
        by <span class='diffauthor' title='213.233.101.41'>213.233.101.41</span> - </div>
        <div class='difftype'>Added lines 1-1152:</div>
        <div class='diffadd'><div class='diffmarkup'>!!Resources -&gt; [[Resources.Documentation | Documentation]] -&gt; [[Resources.DocsTutorials | Tutorials]] -&gt; Realtime OpenSIPS - Asterisk Integration<br />This page has been visited {$PageCount} times.<br />(:toc-float Table of Content:)<br />----<br /><br />!!! Realtime '''OpenSIPS - Asterisk''' Integration<br /><br />'''Version 1.0'''<br /><br />----<br />!!!! Scope<br /><br />This tutorial presents the concept and implementation of a realtime integration of OpenSIPS SIP server and Asterisk media server.<br /><br />OpenSIPS is used a SIP server - users are registering with it, it routes calls, etc - while the purpose of Asterisk is to provide a full set of media services - like voicemail, conference, announcements, etc.<br /><br />It is a realtime integration because both OpenSIPS and Asterisk are provisioned in the same same time when comes to user accounts - when creating a new OpenSIPS users, automatically Asterisk will learn about it an provide and configure all necessary  media services for it.<br /><br />Both OpenSIPS and Asterisk will be provisioned (for user accounts) via a shared mysql database.<br /><br />----<br />!!!! Setup presentation<br /><br />The following services will be offered by this integrated configuration:<br />* '''voicemail''' - users will get access to their mailbox; authentication will be done by OpenSIPS; while Asterisk will only provide voicemail IVR (with no access PIN);<br /> <br />* '''conference'''' - opensips will detect and forward calls related to conference service (based on prefixes) to Asterisk, which will provide access (pin based) to the conference rooms;<br /><br />* '''announcements''' - OpenSIPS will identify the cases and types of announcements that needs to be played and will simply redirect to Asterisk.<br /><br />----<br />!!!! Prerequisites  <br /><br />!!!! OpenSIPS<br /><br />Install OpenSIPS 1.5 with mysql DB support (db_mysql module). if you use sources (tarballs or svn checkouts) do the following:<br />[@<br />   $ make include_modules=&quot;db_mysql&quot; prefix=&quot;/&quot; all<br />   $ make include_modules=&quot;db_mysql&quot; prefix=&quot;/&quot; install<br />@]<br /><br />!!!! Asterisk<br /><br />Use Asterisk 1.4. With 1.6, the DB scheme is a bit different and some additional fields may be required.<br /><br />You need to have the voicemail support with DB support, so take care and install the '''unixodbc''' support in Asterisk.<br /><br />Also for the conferencing part ('''meetme''' module) you need the zaptel support ('''ztdummy''' kernel module).<br /><br />----<br />!!!! DB Setup<br /><br />Only '''voicemail''' and '''conference''' services do require DB support. While the '''conference''' DB table will be exclusively be used by Asterisk (OpenSIPS does not require any information form there), the '''voicemail''' service do require a tight sharing of DB information about users between OpenSIPS and Asterisk.<br /><br />Considering OpenSIPS as the core SIP element of the platform, the core DB will be also belonging to OpenSIPS - we will use the OpenSIPS DB to drive both OpenSIPS and Asterisk. The tables required by Asterisk (for voicemail service) will be mapped over the OpenSIPS tables.<br /><br />This approach assumes two steps:<br /># creating the OpenSIP tables and extend them to contain also the fields (info) required by Asterisk.<br /># creating the mysql views over the OpenSIPS tables, in order to simulate the Asterisk tables<br /><br />!!!!! Creating the OpenSIPS tables<br /><br />In file '''/etc/opensips/opensipsctlrc''' enable the mysql backend (see '''DBENGINE''') and also configure the host where the mysql server is located, the name to be used for creating the opensips table, the read-only (ro) and read-write (rw) usernames and passwords to be created for accessing the opensips DB - see all the varaibles with '''DB''' prefix in the file.<br /><br />Proceed with creation of the OpenSIPS standard database:<br />[@<br />   $ opensipsdbctl create<br />@]<br /><br />If you use the default values to DB host and mysql access users, you can access the DB by:<br />[@<br />   $ mysql -h'localhost' -u'opensips' -p'opensipsrw' opensips<br />     &gt;<br />@]<br /><br />Once the default tables are created, we need to alter the '''subscriber''' table in order to add some additional fields required by the Asterisk DB view. These changes are:<br />* add '''vm_password''' to be used as voicemail pin<br />* add '''first_name''' and '''last_name''' as subscriber name<br />* add '''email_address''' as subscriber's email address<br />* add '''datetime_created''' as timestamp of the subscriber creation.<br /><br />Login to the '''opensips''' database (use the above login command) and run:<br />[@<br />  &gt; alter table subscriber add column `vmail_password` varchar(8) NOT NULL default '1234';<br />  &gt; alter table subscriber add column `first_name` varchar(25) NOT NULL default '';<br />  &gt; alter table subscriber add column `last_name` varchar(45) NOT NULL default '';<br />  &gt; alter table subscriber add column `email_address` varchar(50) NOT NULL default '';<br />  &gt; alter table subscriber add column `datetime_created` datetime NOT NULL default '0000-00-00 00:00:00';<br />@]<br /><br />!!!!! Creating the Asterisk tables<br /><br />Create a separate database to be used by Asterisk - login as root into mysql server and run:<br />[@<br />  &gt; create database asterisk;<br />  &gt; GRANT ALL PRIVILEGES ON asterisk.* TO 'asterisk' IDENTIFIED  BY 'asterisk_pwd';<br />@]<br /><br />Create the Asterisk tables which are exclusively used only by Asterisk (as mysql tables):<br />[@<br /># create table for the meetme service<br />CREATE TABLE `meetme` (<br />  `confno` varchar(80) NOT NULL default '0',<br />  `username` varchar(64) NOT NULL default '',<br />  `domain` varchar(128) NOT NULL default '',<br />  `pin` varchar(20) default NULL,<br />  `adminpin` varchar(20) default NULL,<br />  `members` int(11) NOT NULL default '0',<br />  PRIMARY KEY  (`confno`)<br />) ENGINE=MyISAM<br /><br /># create table to store the voicemail massages<br />CREATE TABLE `voicemessages` (<br />  `id` int(11) NOT NULL auto_increment,<br />  `msgnum` int(11) NOT NULL default '0',<br />  `dir` varchar(80) default '',<br />  `context` varchar(80) default '',<br />  `macrocontext` varchar(80) default '',<br />  `callerid` varchar(40) default '',<br />  `origtime` varchar(40) default '',<br />  `duration` varchar(20) default '',<br />  `mailboxuser` varchar(80) default '',<br />  `mailboxcontext` varchar(80) default '',<br />  `recording` longblob,<br />  PRIMARY KEY  (`id`),<br />  KEY `dir` (`dir`)<br />) ENGINE=MyISAM<br />@]<br /><br />Create the Asterisk tables (as mysql views) that import the information from OpenSIPS tables:<br />[@<br /># create the asterisk users tables as a view over the OpenSIPS subscriber table<br />CREATE VIEW `asterisk`.`sipusers` AS select<br />  `opensips`.`subscriber`.`username` AS `name`,<br />  `opensips`.`subscriber`.`username` AS `username`,<br />  _latin1'friend' AS `type`,<br />  NULL AS `secret`,<br />  `opensips`.`subscriber`.`domain` AS `host`,<br />  concat(`opensips`.`subscriber`.`rpid`,_latin1' ',_latin1'&lt;',`opensips`.`subscriber`.`username`,_latin1'&gt;') AS `callerid`,<br />  _latin1'default' AS `context`,<br />  `opensips`.`subscriber`.`username` AS `mailbox`,<br />  _latin1'yes' AS `nat`,<br />  _latin1'no' AS `qualify`,<br />  `opensips`.`subscriber`.`username` AS `fromuser`,<br />  NULL AS `authuser`,<br />  `opensips`.`subscriber`.`domain` AS `fromdomain`,<br />  NULL AS `insecure`,<br />  _latin1'no' AS `canreinvite`,<br />  NULL AS `disallow`,<br />  NULL AS `allow`,<br />  NULL AS `restrictcid`,<br />  `opensips`.`subscriber`.`domain` AS `defaultip`,<br />  `opensips`.`subscriber`.`domain` AS `ipaddr`,<br />  _latin1'5060' AS `port`,<br />  NULL AS `regseconds`<br />from `opensips`.`subscriber`;<br /><br /># create the asterisk voceimail users table as a view over the OpenSIPS subscriber table<br />CREATE VIEW `asterisk`.`vmusers` AS select<br />  concat(`opensips`.`subscriber`.`username`,`opensips`.`subscriber`.`domain`) AS `uniqueid`,<br />  `opensips`.`subscriber`.`username` AS `customer_id`,<br />  _latin1'default' AS `context`,<br />  `opensips`.`subscriber`.`username` AS `mailbox`,<br />  `opensips`.`subscriber`.`vmail_password` AS `password`,<br />  concat(`opensips`.`subscriber`.`first_name`,_latin1' ',`opensips`.`subscriber`.`last_name`) AS `fullname`,<br />  `opensips`.`subscriber`.`email_address` AS `email`,<br />  NULL AS `pager`,<br />  `opensips`.`subscriber`.`datetime_created` AS `stamp`<br />from `opensips`.`subscriber`;<br /><br />#create the asterisk voicemail aliases table as a view over the OpenSIPS dbaliases table<br />CREATE VIEW `asterisk`.`vmaliases` AS select<br />  `opensips`.`dbaliases`.`alias_username` AS `alias`,<br />  _latin1'default' AS `context`,<br />  `opensips`.`dbaliases`.`username` AS `mailbox`<br />from `opensips`.`dbaliases`;<br />@]<br /><br />Configure the access for Asterisk to the created database (via unixodbc):<br />* in ''etc/odbcinst.ini''<br />[@<br />[MySQL]<br />Description     = MySQL driver<br />Driver      = /usr/lib/odbc/libmyodbc.so<br />Setup       = /usr/lib/odbc/libodbcmyS.so<br />CPTimeout       =<br />CPReuse     =<br />UsageCount      = 1<br />@]<br /><br />* in ''/etc/odbc.ini''<br />[@<br />[MySQL-asterisk]<br />Description = MySQL Asterisk database<br />Trace       = Off<br />TraceFile   = stderr<br />Driver      = MySQL<br />SERVER      = localhost<br />USER        = asterisk<br />PASSWORD    = asterisk_pwd<br />PORT        = 3306<br />DATABASE    = asterisk<br />@]<br /><br />* in ''/etc/asterisk/res_odbc.conf''<br />[@<br />[asterisk]<br />enabled =&gt; yes<br />dsn =&gt; MySQL-asterisk<br />username =&gt; asterisk<br />password =&gt; asterisk_pwd<br />pre-connect =&gt; yes<br />@]<br /><br />* in ''/etc/asterisk/extconfig.conf''<br />[@<br />sipusers =&gt; odbc,asterisk,sipusers<br />sippeers =&gt; odbc,asterisk,sipusers<br />voicemail =&gt; odbc,asterisk,vmusers<br />meetme =&gt; odbc,asterisk,meetme<br />@]<br /><br /><br />----<br />!!!! Asterisk dialplan<br /><br />The following extensions are set for Asterisk:<br /><br /># '''VMR_''' prefix indicates that the caller (identify by SIP FROM header) leaves a voicemail message to the user indicated by the RURI (after the prefix).<br /><br /># '''VM_pickup''' RURI indicates that the caller (identify by SIP FROM header) accesses his own voicemailbox IVR (to listen his messages); the access is done directly, without any PIN required from Asterisk<br /><br /># '''AN_notavailable''' plays the &quot;Not Available&quot; audio message<br /><br /># '''AN_time''' plays the current time message (for the given timezone)<br /><br /># '''AN_date''' plays the current time message (for the given timezone)<br /><br /># '''AN_echo''' accesses the echo audio service<br /><br /># '''CR_''' prefix indicates access to a conference room; the number of the room is part of the RURI, after the prefix (like CR_3322); Asterisk will perform the checks for conference room existence and for the access PIN code. <br /><br /><br /><br />Set in ''/etc/asterisk/extensions.conf''' :<br />[@<br />[general]<br />static=yes<br />writeprotect=no<br /><br />[default]<br /><br />; Voicemail <br />exten =&gt; _VMR_.,n,Ringing<br />exten =&gt; _VMR_.,n,Wait(1)<br />exten =&gt; _VMR_.,n,Answer<br />exten =&gt; _VMR_.,n,Wait(1)<br />exten =&gt; _VMR_.,n,Voicemail(${EXTEN:4}|u)<br />exten =&gt; _VMR_.,n,Hangup<br /><br />; Allow users to call their Voicemail directly<br />exten =&gt; VM_pickup,n,Ringing<br />exten =&gt; VM_pickup,n,wait(1)<br />exten =&gt; VM_pickup,n,VoicemailMain(${CALLERIDNUM}|s)<br />exten =&gt; VM_pickup,n,Hangup<br /><br /><br />; announcement: not available<br />exten =&gt; AN_notavailable,1,Ringing<br />exten =&gt; AN_notavailable,2,Playback(notavailable)<br />exten =&gt; AN_notavailable,3,Hangup<br /><br />; announcement: time<br />exten =&gt; AN_time,1,Ringing<br />exten =&gt; AN_time,2,Wait(1)<br />exten =&gt; AN_time,3,SayUnixTime(,Europe/Bucharest,HMp)<br />exten =&gt; AN_time,4,Hangup<br /><br />; announcement:date<br />exten =&gt; AN_date,1,Ringing<br />exten =&gt; AN_date,2,SayUnixTime(,Europe/Bucharest,ABdY)<br />exten =&gt; AN_date,3,Hangup<br /><br />; announcement: echo<br />exten =&gt; AN_echo,1,Ringing<br />exten =&gt; AN_echo,2,Answer<br />exten =&gt; AN_echo,3,Echo<br /><br />; Conference service<br />exten =&gt; _CR_.,1,Ringing<br />exten =&gt; _CR_.,n,Wait(1)<br />exten =&gt; _CR_.,n,MeetMe(${EXTEN:3}|Mi)<br /><br /><br />@]<br /><br /><br />----<br />!!!! OpenSIPS configuration<br /><br />In this example we take the OpenSIPS default config file that provides user registration and authentication against the DB and extends the script for adding the following media oriented services:<br /><br /># voicemail<br />## leaving a message - if the called user is not registered on OpenSIPS, the call will be forwarded by OpenSIPS (by adding '''VMR_''' prefix) to Asterisk<br />## listening messages -if a subscriber calls to the *1111 number, OpenSIPS will rewrite it to '''VM_pickup''' and send it to Asterisk<br /># announcements <br />## service number *2111 for listening the current time message - OpenSIPS will rewrite it to '''AN_time''' and send it to Asterisk<br />## service number *2112 for listening the current date message - OpenSIPS will rewrite it to '''AN_date''' and send it to Asterisk<br />## service number *2113 for accessing the echo service - OpenSIPS will rewrite it to '''AN_echo''' and send it to Asterisk<br /># conference<br />## service number *3XXX for dialling into the conference room XXX - OpenSIPS will rewrite it to '''CR_XXX''' and send it to Asterisk<br /><br />In ''/etc/opensips/opensips.cfg'' place (see the ASTERISK_HOOKS markers to find the script parts relevant to Asterisk integration):<br />[@<br /><br />####### Global Parameters #########<br /><br />debug=3<br />log_stderror=no<br />log_facility=LOG_LOCAL0<br /><br />fork=yes<br />children=4<br /><br />/* uncomment the following lines to enable debugging */<br />#debug=6<br />#fork=no<br />#log_stderror=yes<br /><br />port=5060<br /><br />/* uncomment and configure the following line if you want opensips to <br />   bind on a specific interface/port/proto (default bind on all available) */<br />#listen=udp:192.168.1.2:5060<br /><br /><br />####### Modules Section ########<br /><br />#set module path<br />mpath=&quot;/lib/opensips/modules/&quot;<br /><br />loadmodule &quot;db_mysql.so&quot;<br />loadmodule &quot;signaling.so&quot;<br />loadmodule &quot;sl.so&quot;<br />loadmodule &quot;tm.so&quot;<br />loadmodule &quot;rr.so&quot;<br />loadmodule &quot;maxfwd.so&quot;<br />loadmodule &quot;usrloc.so&quot;<br />loadmodule &quot;registrar.so&quot;<br />loadmodule &quot;textops.so&quot;<br />loadmodule &quot;mi_fifo.so&quot;<br />loadmodule &quot;uri_db.so&quot;<br />loadmodule &quot;uri.so&quot;<br />loadmodule &quot;xlog.so&quot;<br />loadmodule &quot;acc.so&quot;<br />loadmodule &quot;auth.so&quot;<br />loadmodule &quot;auth_db.so&quot;<br />loadmodule &quot;domain.so&quot;<br /><br /># ----------------- setting module-specific parameters ---------------<br /><br /><br /># ----- mi_fifo params -----<br />modparam(&quot;mi_fifo&quot;, &quot;fifo_name&quot;, &quot;/tmp/opensips_fifo&quot;)<br /><br /># ----- rr params -----<br /># add value to ;lr param to cope with most of the UAs<br />modparam(&quot;rr&quot;, &quot;enable_full_lr&quot;, 1)<br /># do not append from tag to the RR (no need for this script)<br />modparam(&quot;rr&quot;, &quot;append_fromtag&quot;, 0)<br /><br /># ----- usrloc params -----<br />modparam(&quot;usrloc&quot;, &quot;db_mode&quot;,   2)<br />modparam(&quot;usrloc&quot;, &quot;db_url&quot;,<br />	&quot;mysql://opensips:opensipsrw@localhost/opensips&quot;)<br /><br /># ----- uri_db params -----<br />modparam(&quot;uri_db&quot;, &quot;use_uri_table&quot;, 0)<br />modparam(&quot;uri_db&quot;, &quot;db_url&quot;, &quot;&quot;)<br /><br /># ----- acc params -----<br />/* what sepcial events should be accounted ? */<br />modparam(&quot;acc&quot;, &quot;early_media&quot;, 1)<br />modparam(&quot;acc&quot;, &quot;report_ack&quot;, 1)<br />modparam(&quot;acc&quot;, &quot;report_cancels&quot;, 1)<br />/* account triggers (flags) */<br />modparam(&quot;acc&quot;, &quot;failed_transaction_flag&quot;, 3)<br />modparam(&quot;acc&quot;, &quot;log_flag&quot;, 1)<br />modparam(&quot;acc&quot;, &quot;log_missed_flag&quot;, 2)<br />/* uncomment the following lines to enable DB accounting also */<br />modparam(&quot;acc&quot;, &quot;db_flag&quot;, 1)<br />modparam(&quot;acc&quot;, &quot;db_missed_flag&quot;, 2)<br /><br /># ----- auth_db params -----<br />modparam(&quot;auth_db&quot;, &quot;calculate_ha1&quot;, yes)<br />modparam(&quot;auth_db&quot;, &quot;password_column&quot;, &quot;password&quot;)<br />modparam(&quot;auth_db&quot;, &quot;db_url&quot;,<br />	&quot;mysql://opensips:opensipsrw@localhost/opensips&quot;)<br />modparam(&quot;auth_db&quot;, &quot;load_credentials&quot;, &quot;&quot;)<br /><br /># ----- domain params -----<br />modparam(&quot;domain&quot;, &quot;db_url&quot;,<br />	&quot;mysql://opensips:opensipsrw@localhost/opensips&quot;)<br />modparam(&quot;domain&quot;, &quot;db_mode&quot;, 1)   # Use caching<br /><br /># ----- multi-module params -----<br />/* uncomment the following line if you want to enable multi-domain support<br />   in the modules (dafault off) */<br />modparam(&quot;alias_db|auth_db|usrloc|uri_db&quot;, &quot;use_domain&quot;, 1)<br /><br /><br />####### Routing Logic ########<br /><br /><br /># main request routing logic<br /><br />route{<br /><br />	if (!mf_process_maxfwd_header(&quot;10&quot;)) {<br />		send_reply(&quot;483&quot;,&quot;Too Many Hops&quot;);<br />		exit;<br />	}<br /><br />	if (has_totag()) {<br />		# sequential request withing a dialog should<br />		# take the path determined by record-routing<br />		if (loose_route()) {<br />			if (is_method(&quot;BYE&quot;)) {<br />				setflag(1); # do accounting ...<br />				setflag(3); # ... even if the transaction fails<br />			} else if (is_method(&quot;INVITE&quot;)) {<br />				# even if in most of the cases is useless, do RR for<br />				# re-INVITEs alos, as some buggy clients do change route set<br />				# during the dialog.<br />				record_route();<br />			}<br />			# route it out to whatever destination was set by loose_route()<br />			# in $du (destination URI).<br />			route(1);<br />		} else {<br />			if ( is_method(&quot;ACK&quot;) ) {<br />				if ( t_check_trans() ) {<br />					# non loose-route, but stateful ACK; must be an ACK after <br />					# a 487 or e.g. 404 from upstream server<br />					t_relay();<br />					exit;<br />				} else {<br />					# ACK without matching transaction -&gt;<br />					# ignore and discard<br />					exit;<br />				}<br />			}<br />			send_reply(&quot;404&quot;,&quot;Not here&quot;);<br />		}<br />		exit;<br />	}<br /><br />	#initial requests<br /><br />	# CANCEL processing<br />	if (is_method(&quot;CANCEL&quot;)) {<br />		if (t_check_trans())<br />			t_relay();<br />		exit;<br />	}<br /><br />	t_check_trans();<br /><br />	# authenticate if from local subscriber<br />	if (!(method==&quot;REGISTER&quot;) &amp;&amp; is_from_local()) {<br />		if (!proxy_authorize(&quot;&quot;, &quot;subscriber&quot;)) {<br />			proxy_challenge(&quot;&quot;, &quot;0&quot;);<br />			exit;<br />		}<br />		if (!check_from()) {<br />			send_reply(&quot;403&quot;,&quot;Forbidden auth ID&quot;);<br />			exit;<br />		}<br />	<br />		consume_credentials();<br />		# caller authenticated<br />	}<br /><br />	# preloaded route checking<br />	if (loose_route()) {<br />		xlog(&quot;L_ERR&quot;,<br />		&quot;Attempt to route with preloaded Route's [$fu/$tu/$ru/$ci]&quot;);<br />		if (!is_method(&quot;ACK&quot;))<br />			send_reply(&quot;403&quot;,&quot;Preload Route denied&quot;);<br />		exit;<br />	}<br /><br />	# record routing<br />	if (!is_method(&quot;REGISTER|MESSAGE&quot;))<br />		record_route();<br /><br />	# account only INVITEs<br />	if (is_method(&quot;INVITE&quot;)) {<br />		setflag(1); # do accounting<br />	}<br /><br />	# if not a targetting a local SIP domain, just send it out<br />	# based on DNS (calls to foreign SIP domains)<br />	if (!is_uri_host_local()) {<br />		append_hf(&quot;P-hint: outbound\r\n&quot;); <br />		route(1);<br />	}<br /><br />	# requests for my domain<br /><br />	if (is_method(&quot;REGISTER&quot;)) {<br />		# authenticate the REGISTER requests<br />		if (!www_authorize(&quot;&quot;, &quot;subscriber&quot;)) {<br />			www_challenge(&quot;&quot;, &quot;0&quot;);<br />			exit;<br />		}<br />		if (!check_to()) {<br />			send_reply(&quot;403&quot;,&quot;Forbidden auth ID&quot;);<br />			exit;<br />		}<br /><br />		if (!save(&quot;location&quot;))<br />			sl_reply_error();<br /><br />		exit;<br />	}<br /><br />	if ($rU==NULL) {<br />		# request with no Username in RURI<br />		send_reply(&quot;484&quot;,&quot;Address Incomplete&quot;);<br />		exit;<br />	}<br /><br />	# ASTERISK HOOK - BEGIN<br />	# media service number? (digits starting with *)<br />	if ($rU=~&quot;^\*[1-9]+&quot;) {<br />		# we do provide access to media services only to our<br />		# subscribers, who were previously authenticated <br />		if (!is_from_local()) {<br />			send_reply(&quot;403&quot;,&quot;Forbidden access to media service&quot;);<br />			exit;<br />		}<br />		#identify the services and translate to Asterisk extensions<br />		if ($rU==&quot;*1111&quot;) {<br />			# access to own voicemail IVR<br />			seturi(&quot;sip:VM_pickup@ASTERISK_IP:ASTERISK_PORT&quot;);<br />		} else<br />		if ($rU==&quot;*2111&quot;) {<br />			# access to the &quot;say time&quot; announcement <br />			seturi(&quot;sip:AN_time@ASTERISK_IP:ASTERISK_PORT&quot;);<br />		} else<br />		if ($rU==&quot;*2112&quot;) {<br />			# access to the &quot;say date&quot; announcement <br />			seturi(&quot;sip:AN_date@ASTERISK_IP:ASTERISK_PORT&quot;);<br />		} else<br />		if ($rU==&quot;*2113&quot;) {<br />			# access to the &quot;echo&quot; service<br />			seturi(&quot;sip:AN_echo@ASTERISK_IP:ASTERISK_PORT&quot;);<br />		} else<br />		if ($rU=~&quot;\*3[0-9]{3}&quot;) {<br />			# access to the conference service <br />			# remove the &quot;*3&quot; prefix and place the &quot;CR_&quot; prefix<br />			strip(2);<br />			prefix(&quot;CR_&quot;);<br />			rewritehostport(&quot;ASTERISK_IP:ASTERISK_PORT&quot;);<br />		} else {<br />			# unknown service<br />			seturi(&quot;sip:AN_notavailable@ASTERISK_IP:ASTERISK_PORT&quot;);<br />		}<br />		# after setting the proper RURI (to point to corresponding ASTERISK extension),<br />		# simply forward the call<br />		t_relay();<br />		exit;<br />	}<br />	# ASTERISK HOOK - END<br /><br />	# do lookup<br />	if (!lookup(&quot;location&quot;)) {<br />		# ASTERISK HOOK - BEGIN<br />		# callee is not registered, so different to Voicemail<br />		# First add the VM recording prefix to the RURI<br />		prefix(&quot;VMR_&quot;);<br />		# forward to the call to Asterisk (replace below with real IP and port)<br /> 		rewritehostport(&quot;ASTERISK_IP:ASTERISK_PORT&quot;);<br />		route(1);<br />		# ASTERISK HOOK - END<br />		exit;<br />	}<br /><br />	# when routing via usrloc, log the missed calls also<br />	setflag(2);<br /><br />	# arm a failure route in order to catch failed calls<br />	# targeting local subscribers; if we fail to deliver<br />	# the call to the user, we send the call to voicemail<br />	t_on_failure(&quot;1&quot;);<br /><br />	route(1);<br />}<br /><br /><br />route[1] {<br />	if (!t_relay()) {<br />		sl_reply_error();<br />	};<br />	exit;<br />}<br /><br /><br />failure_route[1] {<br />	if (t_was_cancelled()) {<br />		exit;<br />	}<br /><br />	# if the failure code is &quot;408 - timeout&quot; or &quot;486 - busy&quot;,<br />	# forward the calls to voicemail recording<br />	if (t_check_status(&quot;486|408&quot;)) {<br />		# ASTERISK HOOK - BEGIN<br />		# First revert the RURI to get the original user in RURI<br />		# Then add the VM recording prefix to the RURI<br />		revert_uri();<br />		prefix(&quot;VMR_&quot;);<br />		# forward to the call to Asterisk (replace below with real IP and port)<br /> 		rewritehostport(&quot;ASTERISK_IP:ASTERISK_PORT&quot;);<br />		t_relay();<br />		# ASTERISK HOOK - END<br />		exit;<br />	}<br />}<br />@]<br /><br />----<br />!!!! How to use it<br /><br />Add a SIP domain in the OpenSIPS server (note that the sip domain most point -via DNS- to your opensips server; also for a SIP domain, you can use the IP address of the SIP server too):<br />[@<br />$ mysql -h'localhost' -u'opensips' -p'opensipsrw' opensips<br /> &gt; insert into domain (domain) values (&quot;test.com&quot;);<br /><br />$ opensipsctl fifo domain_reload<br />@]<br /><br />Create some subscribers with your OpenSIPS platform (alice@test.com with SIP password '1234'):<br />[@<br />$ opensipsctl add alice@test.com 1234<br />$ opensipsctl add bob@test.com 4321<br />@]<br /><br />If you want to change the voicemail pin (for subscriber alice@test.com):<br />[@<br />$ mysql -h'localhost' -u'opensips' -p'opensipsrw' opensips<br /> &gt; update subscriber set vm_password=&quot;6745&quot; where username=&quot;alice&quot; and domain=&quot;test.com&quot;;<br />@]<br /><br />!!!!! Test voicemail<br />Register your '''alice''' subscriber (ex: using twinkle soft client) to your server. Keep '''bob''' unregistered.<br /><br />From '''alice''' dial '''bob''' address -  you should get the prompt for leaving a voicemail messages/recording.<br /><br />Register '''bob''' also and dial '''*1111''' - you should get the voicemail IVR and listen the recording left by '''alice'''.<br /><br /><br />!!!!! Test announcements<br />Form a registered subscriber, simply dial the service numbers as configured in OpenSIPS (see the beginning of the previous chapter).<br /><br />!!!!! Test conference <br /><br />Add a conference room to your system:<br />[@<br />$ mysql -h'localhost' -u'asterisk' -p'asterisk_pwd' asterisk<br /> &gt; insert into meetme (confno, pin, adminpin) values (&quot;761&quot;,&quot;1122&quot;,&quot;4322&quot;);<br />@]<br /><br />From a registered SIP user, dial '''*3761''' (to dial in conf room 761) and at IVR prompt type '''1122''' access pin.<br /><br /><br />----<br />[[#comment1]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~BTN]]  &amp;mdash;  [-31 August 2009, 22:11-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Which module is revert_ruri(); located? Seems like my setup throws an error when running because of this. Also when running sl_send_error(). If I comment these 2 lines out opensips runs.<br /><br />%blue%[bogdan] - he correct name is revert_uri() - I fixed the script; this function is exported directly by core, not by a module. Also, there is no sl_send_error() in the script ?!%%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment2]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Eberx]]  &amp;mdash;  [-01 September 2009, 09:20-]  <br />&gt;&gt;messageitem&lt;&lt;<br />kuul. Cool.<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment4]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~BTN]]  &amp;mdash;  [-01 September 2009, 16:14-]  <br />&gt;&gt;messageitem&lt;&lt;<br />sorry meant sl_reply_error()<br /><br />Sep  1 10:09:20 [28030] ERROR:core:check_actions: script function &quot;sl_reply_error&quot; (types=1) does not support route type (2)<br />Sep  1 10:09:20 [28030] ERROR:core:check_actions: route stack[0]=0<br />Sep  1 10:09:20 [28030] ERROR:core:main: bad function call in config file<br /><br />%blue%[bogdan] - there was a small mistake in the failure route. I replaced &quot;route(1)&quot; with &quot;t_relay()&quot; - the problem is the &quot;sl_reply_error&quot; function cannot be called from failure route%%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment5]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Philippe HENSEL]]  &amp;mdash;  [-01 September 2009, 22:36-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Very nice initiative !<br />Such an update-to-date document is fundamental for a correct use of OpenSIPS in conjunction with Asterisk.<br />Thanks a lot !!<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment7]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~BTN]]  &amp;mdash;  [-04 September 2009, 19:37-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Ok, So one other fix I noticed is that in the Asterisk Dialplan, we changed it to VM_pickup not VMS_pickup and also, these exten =&amp;gt; _VMR_.,n,Ringing<br />exten =&amp;gt; _VMR_.,n,Wait(1)<br />exten =&amp;gt; _VMR_.,n,Answer<br />exten =&amp;gt; _VMR_.,n,Wait(1)<br />exten =&amp;gt; _VMR_.,n,Voicemail(${EXTEN:4}|u)<br />exten =&amp;gt; _VMR_.,n,Hangup<br /><br />; Allow users to call their Voicemail directly<br />exten =&amp;gt; VMS_pickup,n,Ringing<br />exten =&amp;gt; VMS_pickup,n,wait(1)<br />exten =&amp;gt; VMS_pickup,n,VoicemailMain(${CALLERIDNUM}|s)<br />exten =&amp;gt; VMS_pickup,n,Hangup<br /><br />should be replaced with <br /><br />exten =&amp;gt; _VMR_.,1,Ringing<br />exten =&amp;gt; _VMR_.,n,Wait(1)<br />exten =&amp;gt; _VMR_.,n,Answer<br />exten =&amp;gt; _VMR_.,n,Wait(1)<br />exten =&amp;gt; _VMR_.,n,Voicemail(${EXTEN:4}|u)<br />exten =&amp;gt; _VMR_.,n,Hangup<br /><br />; Allow users to call their Voicemail directly<br />exten =&amp;gt; VM_pickup,1,Ringing<br />exten =&amp;gt; VM_pickup,n,wait(1)<br />exten =&amp;gt; VM_pickup,n,VoicemailMain(${CALLERIDNUM}|s)<br />exten =&amp;gt; VM_pickup,n,Hangup<br /><br />The type is setting the 1 in the squence, before it was n.<br /><br />Thanks again.<br /><br />%blue%[bogdan] - thanks for VMS_pickup -&amp;gt;VM_pickup hint - I updated the tutorial!%%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment8]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Karnith]]  &amp;mdash;  [-15 September 2009, 13:33-]  <br />&gt;&gt;messageitem&lt;&lt;<br />I get an error with phplib_id when creating the views. There is no table phplib_id in opensips.<br /><br />How could this be applied to trixbox? I added the phplib_id table and was able to create the view, it shows the data in the db, but it doesn't create extensions for the users.<br /><br />Thanks for the tut.<br /><br /><br />%blue%[bogdan] - thanks for reporting the issue - I got rid of that phplib_id and replaced with a concat of username and domain.%%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment9]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~kowalma]]  &amp;mdash;  [-15 September 2009, 22:46-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi,<br /><br /> I'm using 1.6 and I think you are missing some fileds:<br /><br />[Sep 15 22:39:14] WARNING[18413] res_config_odbc.c: Realtime table sipusers@asterisk: column 'regseconds' is not long enough to contain realtime data (needs 11)<br />[Sep 15 22:39:14] WARNING[18413] res_config_odbc.c: Realtime table sipusers@asterisk requires column 'defaultuser', but that column does not exist!<br />[Sep 15 22:39:14] WARNING[18413] res_config_odbc.c: Realtime table sipusers@asterisk requires column 'fullcontact', but that column does not exist!<br />[Sep 15 22:39:14] WARNING[18413] res_config_odbc.c: Realtime table sipusers@asterisk requires column 'regserver', but that column does not exist!<br />[Sep 15 22:39:14] WARNING[18413] res_config_odbc.c: Realtime table sipusers@asterisk requires column 'useragent', but that column does not exist!<br />[Sep 15 22:39:14] WARNING[18413] res_config_odbc.c: Realtime table sipusers@asterisk requires column 'lastms', but that column does not exist!<br /><br />%blue%[bogdan] - it seams that there are some changes in Asterisk DB between 1.4 and 1.6, so I will reduce the compatibility to 1.4, until these errors are fixed in the tutorial. Thanks for your report%%<br />&gt;&gt;&lt;&lt;<br /><br /><br />[[#comment13]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Duane Larson]]  &amp;mdash;  [-29 September 2009, 20:01-]  <br />&gt;&gt;messageitem&lt;&lt;<br />When you update the users PIN by doing the following<br />     $ mysql -h'localhost' -u'opensips' -p'opensipsrw' opensips<br />     &amp;gt; update subscriber set vmail_password=&quot;6745&quot; where username=&quot;alice&quot; and domain=&quot;test.com&quot;;<br /><br />A restart is required for OpenSIPS correct?<br /><br />%blue%[bogdan] - no restart is required %%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment14]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Duane Larson]]  &amp;mdash;  [-07 October 2009, 00:05-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Ahhh I just tested reseting the users voicemail password and a restart is not required with OpenSIPS.  Sweet!  I guess its because of the MySQL views into the OpenSIPS DB.  There are two different typos above<br />Typo<br />update subscriber set vm_password=&quot;6745&quot; where username=&quot;alice&quot; and domain=&quot;test.com&quot;;<br /><br />It should really be <br />update subscriber set vmail_password=&quot;6745&quot; where username=&quot;alice&quot; and domain=&quot;test.com&quot;;<br /><br />Typo<br />concat(`opensips`.`subscriber`.`username`,`opensips`.`subscriber`.`domain`) AS  AS `uniqueid`,<br /><br />It should really be<br />concat(`opensips`.`subscriber`.`username`,`opensips`.`subscriber`.`domain`) AS `uniqueid`,<br /><br /><br />Also with this setup you need to make sure that the username is unique because asterisk only looks at the mailbox name and doesn't include the domain name.  So you could have an account 24X48XX@test.com and also 24X48XX@foo.com and you would see issues because asterisk will only look for the &quot;24X48XX&quot; in the table and not &quot;24X48XX@test.com&quot;<br /><br />I was trying to create a system where the primary account name equals the users email address and the dbaliase is the DID, but if I did it like that if the user called in remotely to check their voicemail and Asterisk asks what mailbox they want to check there is no way for the user to type in the email name on the phone.  So beware of that.<br /><br />Thanks for the Tutorial.  Worked like a charm.<br /><br />%blue%[bogdan] - Thanks for the tips: the typos were fixed; for the mailbox issue, maybe having the mailbox name as concat between username and domain (from subscriber table) will solve the problem%%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment15]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Karnith]]  &amp;mdash;  [-25 October 2009, 16:39-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Because I use trixbox, I did this another way. I copied the dbs over to the opensips server and pointed the trixbox to this server to use the dbs. I wanted to use the full features of trixbox, including the web interfaces for the user accounts, so I will be having opensips subscriber table as a view over the trixbox users table for authentication to the opensips server and user accounts. I happen to be stuck though....<br /><br />The trixbox users table can provide most of the info needed, but the password field is blank. I need to pull the password from the sip table, but I can't seem to figure out how to make a view properly due to the table structure. I have this so far for the opensips view<br /><br />CREATE VIEW `opensips`.`subscriber` AS select<br />  `asterisk`.`users`.`extension` AS `id`,<br />  `asterisk`.`users`.`extension` AS `username`,<br />  _latin1'default' AS `domain`,<br />  `asterisk`.`users`.`password` AS `password`<br />from `asterisk`.`users`;<br /><br />now the sips table layout is:<br /><br />|id |keyword |data |flags|<br /><br />with 22 entries of the id per extension/account. How could I setup in my view the ability to pull from the correct id, keywod and data field to get the password for the account to show in the password virtual table? For example, the password I need is on the 18th row. Could anyone help me with this please?<br /><br />Once I get this working, I will post what I did in a tutorial.<br /><br />Thanks,<br /><br />Karnith<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment16]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Karnith]]  &amp;mdash;  [-02 November 2009, 14:08-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Well, I finally got the view to work using<br /><br />CREATE VIEW `opensips`.`subscriber` AS select<br />  `asterisk`.`sip`.`id` AS `id`,<br />  `asterisk`.`sip`.`id` AS `username`,<br />  _latin1'emunited' AS `domain`,<br />  `asterisk`.`sip`.`data` AS `password`,<br />  _latin1'' AS `ha1`,<br />  _latin1'' AS `ha2`,<br />  _latin1'' AS `rpid`<br />from `asterisk`.`sip` where keyword='secret';<br /><br />I decided to use the sip table as it has just about everything I need to use for accounts in opensips. What I am running into now is when I try to call *97 (for vmail) I get a forbidden access to media service error. Other then that opensips is happy with the view for subscribers and I can make calls to the extensions I create in the freepbx area of trixbox. The view still needs some work, but it is the forbidden error that worries me. In asterisk cli I can see, with sip debug, that if I dial an extension that is not connected it forwards the call to asterisk, but doesn't go to voice mail. Any Ideas on the forbidden error?<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment17]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~alisajjad007]]  &amp;mdash;  [-03 November 2009, 18:53-]  <br />&gt;&gt;messageitem&lt;&lt;<br />there is an minor correction that the AS is repeated twice in the script on line 2 i-e in the <br /><br /># create the asterisk voceimail users table as a view over the OpenSIPS subscriber table<br /><br /><br />&quot;&quot;concat(`opensips`.`subscriber`.`username`,`opensips`.`subscriber`.`domain`) AS  AS &quot;&quot;<br />thanks n regards<br />Ali<br /><br />%blue%[bogdan] - fixed, thank you%%<br /><br />&gt;&gt;&lt;&lt;<br /><br />[[#comment18]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~newtoopensips]]  &amp;mdash;  [-08 December 2009, 11:09-]  <br />&gt;&gt;messageitem&lt;&lt;<br />I'm using asterisk 1.6 but nothing is working with your script unable to dial voicemail with *1111<br /><br />what do you mean here:<br /><br />&quot;Use Asterisk 1.4. With 1.6, the DB scheme is a bit different and some additional fields may be required.&quot;<br /><br />Did you mean &quot;Use Asterisk 1.4. or 1.6&quot;?<br /><br />%blue%[bogdan] - Asterisk 1.6 is not supported as the DB format changed; you need to use Asterisk 1.4%%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment20]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~iotohy]]  &amp;mdash;  [-02 January 2010, 02:51-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi newtoopensips<br />I use opensips 1.6.0(tls) and Asterisk 1.6.2<br /><br />you can try<br /><br />change exten =&amp;gt; _VMR_.,n,Ringing to exten =&amp;gt; _VMR_.,1,Ringing<br />change exten =&amp;gt; VM_pickup,n,Ringing to exten =&amp;gt; VM_pickup,1,Ringing<br /><br /><br />&gt;&gt;&lt;&lt;<br /><br />[[#comment21]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~balaji.bhr]]  &amp;mdash;  [-18 January 2010, 16:12-]  <br />&gt;&gt;messageitem&lt;&lt;<br />On Opensips 1.6 with Asterisk 1.4.28<br />this is my working config<br /><br />i found error when iam adding views in the database;<br /><br /># create the asterisk voceimail users table as a view over the OpenSIPS subscriber table<br />CREATE VIEW `asterisk`.`vmusers` AS select<br />  concat(`opensips`.`subscriber`.`username`,`opensips`.`subscriber`.`domain`) AS `uniqueid`,<br />  `opensips`.`subscriber`.`username` AS `customer_id`,<br />  _latin1'default' AS `context`,<br />  `opensips`.`subscriber`.`username` AS `mailbox`,<br />  `opensips`.`subscriber`.`vmail_password` AS `password`,<br />  concat(`opensips`.`subscriber`.`first_name`,_latin1' ',`opensips`.`subscriber`.`last_name`) AS `fullname`,<br />  `opensips`.`subscriber`.`email_address` AS `email`,<br />  NULL AS `pager`,<br />  `opensips`.`subscriber`.`datetime_created` AS `stamp`<br />from `opensips`.`subscriber`;<br /><br /><br />my extension.conf<br /><br />[general]<br />static=yes<br />writeprotect=no<br /><br />[default]<br /><br />; Voicemail<br />exten =&amp;gt; _VMR_.,1,Voicemail(${EXTEN:4},u)<br />exten =&amp;gt; _VMR_.,2,Hangup<br /><br />; Allow users to call their Voicemail directly<br />exten =&amp;gt; VM_pickup,1,Ringing<br />exten =&amp;gt; VM_pickup,2,wait(1)<br />exten =&amp;gt; VM_pickup,3,VoicemailMain(${CALLERID(num)})<br />exten =&amp;gt; VM_pickup,4,Playback(Goodbye)<br />exten =&amp;gt; VM_pickup,5,Hangup<br /><br /><br />; announcement: not available<br />exten =&amp;gt; AN_notavailable,1,Ringing<br />exten =&amp;gt; AN_notavailable,2,Playback(notavailable)<br />exten =&amp;gt; AN_notavailable,3,Hangup<br /><br />; announcement: time<br />exten =&amp;gt; AN_time,1,Ringing<br />exten =&amp;gt; AN_time,2,Wait(1)<br />exten =&amp;gt; AN_time,3,SayUnixTime(,Europe/Bucharest,HMp)<br />exten =&amp;gt; AN_time,4,Hangup<br /><br />; announcement:date<br />exten =&amp;gt; AN_date,1,Ringing<br />exten =&amp;gt; AN_date,2,SayUnixTime(,Europe/Bucharest,ABdY)<br />exten =&amp;gt; AN_date,3,Hangup<br /><br />; announcement: echo<br />exten =&amp;gt; AN_echo,1,Ringing<br />exten =&amp;gt; AN_echo,2,Answer<br />exten =&amp;gt; AN_echo,3,Echo<br /><br />; Conference service<br />exten =&amp;gt; _CR_.,1,Answer<br />exten =&amp;gt; _CR_.,2,MeetMe(${EXTEN:3},Mi)<br />exten =&amp;gt; _CR_.,3,Hnagup<br /><br />&gt;&gt;&lt;&lt;<br /><br />[[#comment16]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~please]]  &amp;mdash;  [-03 March 2010, 19:37-]  <br />&gt;&gt;messageitem&lt;&lt;<br />HI<br />I got some problem integration with asterisk<br /><br />I got error when step  #opensipsctl fifo domain reload<br />This error is &quot;500 command 'domain' not available&quot;.<br /><br />SO I stop the opensipsctl and start again follow<br /><br />[root@TEST opensips]# opensipsctl start<br /><br />INFO: Starting OpenSIPS :<br /><br />ERROR: PID file /var/run/opensips.pid does not exist -- OpenSIPS start failed<br /><br />So I check in /var/log/messages and got follow<br /><br />Mar  4 00:25:05 TEST opensips: ERROR:core:yyparse: module 'uri_db.so' not found in '/lib/opensips/modules/'<br />Mar  4 00:25:05 TEST opensips: CRITICAL:core:yyerror: parse error in config file, line 37, column 13-14: failed to load module<br />Mar  4 00:25:05 TEST opensips: ERROR:core:sr_load_module: could not open module &amp;lt;/lib/opensips/modules/&amp;gt;: /lib/opensips/modules/: cannot read file data: Is a directory<br />Mar  4 00:25:05 TEST opensips: CRITICAL:core:yyerror: parse error in config file, line 37, column 13-14: failed to load module<br />Mar  4 00:25:05 TEST opensips: ERROR:core:set_mod_param_regex: no module matching uri_db found<br />Mar  4 00:25:05 TEST opensips: CRITICAL:core:yyerror: parse error in config file, line 63, column 19-20: Parameter &amp;lt;use_uri_table&amp;gt; not found in module &amp;lt;uri_db&amp;gt; - can't set<br />Mar  4 00:25:05 TEST opensips: ERROR:core:set_mod_param_regex: no module matching uri_db found<br />Mar  4 00:25:05 TEST opensips: CRITICAL:core:yyerror: parse error in config file, line 64, column 20-21: Parameter &amp;lt;db_url&amp;gt; not found in module &amp;lt;uri_db&amp;gt; - can't set<br />Mar  4 00:25:05 TEST opensips: ERROR:core:main: bad config file (4 errors)<br /><br /><br />Can You guys instruction to me?<br />Thanks<br />Please<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment17]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~help please]]  &amp;mdash;  [-25 March 2010, 16:13-]  <br />&gt;&gt;messageitem&lt;&lt;<br />I would like to know if you have to configure some asterisk files, maybe extensions.conf or sips.conf<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment18]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~voipdummy]]  &amp;mdash;  [-31 March 2010, 11:51-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Anybody can tell, how MWI (Message Waiting Indication) works in this integration when BOB is online &amp;amp; registered?<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment19]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~lucky_pig]]  &amp;mdash;  [-12 May 2010, 04:04-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Help me!<br />I follow introductions in this page. but I get some problems:<br />&quot;  WARNING[12996]: pbx.c:1344 pbx_exec: The application delimiter is now the comma, not the pipe.  Did you forget to convert your dialplan?  (VoiceMailMain(|s)) &quot;<br />&quot; WARNING[3113]: app_voicemail.c:9029 vm_authenticate: Couldn't read username &quot;<br />&quot; WARNING[3068]: pbx.c:1344 pbx_exec: The application delimiter is now the comma, not the pipe.  Did you forget to convert your dialplan?  (MeetMe(100|Mi))&quot;<br /><br />And when asterisk run (asterisk -r), in command CLI&amp;gt; I can't see the script is executed<br />Please help me! Thanks<br /><br />&gt;&gt;&lt;&lt;<br /><br />[[#comment20]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~lucky_pig]]  &amp;mdash;  [-26 May 2010, 03:16-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Now, i'm integrating asterisk and opensips.asterisk is connected database of opensips. i want to execute meetme. in meetme.conf, i don't create any room. confno , pin, members are created in database of opensips.the script is followed:<br />playing conf-getpin.gsm<br />after i enter pin. the script is<br />starting recording of meetme conference 100 into file..............<br />it is kept that and the script don't run any line. I can't listen to music and announce when only person is registered. But members column is increated in database of opensips.<br />please, help me!<br />thank all<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment21]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~son]]  &amp;mdash;  [-28 May 2010, 11:39-]  <br />&gt;&gt;messageitem&lt;&lt;<br />In my though, your article presents the way how to integrate Asterisk and OpenSER in which asterisk server and OpenSER server belong to the same subnet.<br />         Now, I assume that asterisk server has IP address 172.28.20.10 and OpenSER server has IP address 10.10.10.10, the problem is how to asterisk and openser can contact to each other ?<br /> What should we implement in extension.conf file, sip.conf file and openser.conf file, etc. In my model, asterisk plays as media gateway and OpenSER plays as SIP proxy. <br />    Can you attach the configuration files to your reply and teach me the way how to integrate Asterisk and OpenSER in this case.<br />    Thank you very much<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment22]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~prem]]  &amp;mdash;  [-01 June 2010, 09:01-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi, Iam integrating OpenSIPS 1.6.2 and Asterisk1.4.31. I'm using Opensip as Proxy and Asterisk as media server for IVR currenlty. Can any1 tell me; how to integrate for Opensips+Asterisk(IVR) feature. I appreciate your valuable help<br /><br />&gt;&gt;&lt;&lt;<br /><br /><br />[[#comment23]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~KingDavid]]  &amp;mdash;  [-11 March 2011, 03:06-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Why are there so many examples of voicemail configuration on opensips+asterisk, and next to nothing on what really matters, which is load balancing and straight send and receive phone calls?... will it be because not many people know how to do it?<br />&gt;&gt;&lt;&lt;<br /><br /><br />[[#comment24]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Dev]]  &amp;mdash;  [-13 July 2011, 23:40-]  <br />&gt;&gt;messageitem&lt;&lt;<br />I would really like to see how to setup opensips on Amazon EC2 and then load balance two Asterisk servers. Do anybody have any idea how to do that. Currently I have Openser as a load balancer for those two Asterisk servers. Now I would like to upgrade that openser server to current opensips version and configure it on Amazon EC2 server. It should load balance my current Asterisk servers. I appreciate any kind of help. <br />&gt;&gt;&lt;&lt;<br /><br />[[#comment25]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Allen Ford]]  &amp;mdash;  [-19 December 2011, 08:03-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Great work here , how do i send calls to voicemail if not answered?<br />i got alot of info from this site and included alot more work...  <br />Please direct me to the script that sends it to voicemail<br /><br />%blue%[bogdan] - the script we have here has a failure route which does redirect to VM in case of no answer / busy %%<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment26]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Sanjay arora]]  &amp;mdash;  [-27 January 2012, 15:55-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi.. I installed opensips-cp 4.1.. Now as i want to make video conferencing. So what shold be the my next step nad how?? Thanks for help..<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment27]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~abdul basit]]  &amp;mdash;  [-13 March 2012, 16:40-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Just for verify if odbc connection is successful. <br /><br />#isql MySQL-asterisk<br /><br />+---------------------------------------+<br />| Connected!                            |<br />|                                       |<br />| sql-statement                         |<br />| help [tablename]                      |<br />| quit                                  |<br />|                                       |<br />+---------------------------------------+<br />SQL&amp;gt;<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment28]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Nursultan]]  &amp;mdash;  [-16 April 2012, 13:53-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi. I'm doing <br />make prefix=/ all include_modules=&quot;db_mysql&quot;<br />it gives me this:<br /><br />make[1]: Entering directory `/usr/local/src/opensips_1_7/modules/db_mysql'<br />Compiling dbase.c<br />dbase.c:37:25: error: mysql/mysql.h: No such file or directory<br /><br />Anyone Can help me? I'm using Ubuntu 11.10<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment29]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Siper]]  &amp;mdash;  [-29 May 2012, 08:38-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Hi...<br />is it possible to update this procedure for opensips 1.8 and asterisk 10?<br />thanks<br />&gt;&gt;&lt;&lt;<br /><br />[[#comment30]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~Binan]]  &amp;mdash;  [-18 July 2012, 09:55-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Update for this article<br />thanks<br />&gt;&gt;&lt;&lt;<br /><br /><br />[[#comment31]](:nl:)&gt;&gt;messagehead&lt;&lt;<br />!!!!![[~nathan]]  &amp;mdash;  [-12 December 2012, 11:11-]  <br />&gt;&gt;messageitem&lt;&lt;<br />Can anyone send a new tutorial about latest version asterisk integration with opensips?<br />&gt;&gt;&lt;&lt;<br /><br />(:commentboxchrono:)</div></div></div>
      <div class='diffrestore'><a href="Tutorials-OpenSIPSAsteriskIntegration-action=edit&restore=diff-1366821754-1366821754-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit&restore=diff:1366821754:1366821754:&preview=y">Restore</a></div></div></div>
  
<!--PageRightFmt--><!--/PageRightFmt--></td>
</tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
  <hr class="bottomline" /></td>
    <div class='footnav'>
	
      <a rel="nofollow" href="Tutorials-OpenSIPSAsteriskIntegration-action=edit.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=edit">Edit</a> |
      <a rel="nofollow" href="Tutorials-OpenSIPSAsteriskIntegration-action=diff.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=diff">History</a> |
      <a rel="nofollow" href="Tutorials-OpenSIPSAsteriskIntegration-action=print.htm" tppabs="http://www.opensips.org/Documentation/Tutorials-OpenSIPSAsteriskIntegration?action=print" target='_blank'>Print</a> |
      <a href="RecentChanges.htm" tppabs="http://www.opensips.org/Documentation/RecentChanges">Recent Changes</a> |
      <a href="javascript:if(confirm(%27http://www.opensips.org/Site/Search  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Site/Search%27" tppabs="http://www.opensips.org/Site/Search">Search</a></div>
    <div class='lastmod'>Page last modified on June 22, 2015, at 08:18 AM</div></div>
<!--HTMLFooter-->
</div>
</body>
</html>
