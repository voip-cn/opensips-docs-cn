<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>
  <title>openSIPS | Documentation / Management Interface - ver 1.4 </title>
  <link rel='stylesheet' href="print.css" tppabs="http://www.opensips.org/pub/skins/print/print.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }
 
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
  <div id='printhead'>
    <h3>From openSIPS</h3>
    <h1 class='pagename'><a href="javascript:if(confirm(%27http://www.opensips.org/Documentation  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation%27" tppabs="http://www.opensips.org/Documentation">Documentation: Management Interface - ver 1.4 </a></h1>
  </div>
<!--PageText-->
<div id='wikitext'>
<h5>Documentation -&gt; <a class='wikilink' href="Manuals-action=print.htm" tppabs="http://www.opensips.org/Documentation/Manuals?action=print">Manuals</a> -&gt; <a class='wikilink' href="Manual-1-4-action=print.htm" tppabs="http://www.opensips.org/Documentation/Manual-1-4?action=print">Manual 1.4</a> -&gt; Management Interface</h5>
<hr />
<p><span style='font-size:83%'> Pages for other versions: <a class='wikilink' href="Interface-MI-2-2-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-2-2?action=print">devel</a> <a class='wikilink' href="Interface-MI-2-1-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-2-1?action=print">2.1</a> <a class='wikilink' href="Interface-MI-1-11-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-11?action=print">1.11</a>  Older versions: <a class='wikilink' href="Interface-MI-1-10-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-10?action=print">1.10</a> <a class='wikilink' href="Interface-MI-1-9-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-9?action=print">1.9</a> <a class='wikilink' href="Interface-MI-1-8-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-8?action=print">1.8</a> <a class='wikilink' href="Interface-MI-1-7-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-7?action=print">1.7</a> <a class='wikilink' href="Interface-MI-1-6-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-6?action=print">1.6</a> <a class='wikilink' href="Interface-MI-1-5-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-MI-1-5?action=print">1.5</a> 1.4 </span>
</p>
<p class='vspace'><br />
</p><table width='100%'><tr ><td  align='center'><span  style='color: #185662;'><span style='font-size:120%'><strong>Management Interface v1.4</strong></span></span></td></tr>
</table>
<div class='vspace'></div><table width='100%'><tr ><td  align='left'><a class='wikilink' href="Function-Index-1-4-action=print.htm" tppabs="http://www.opensips.org/Documentation/Function-Index-1-4?action=print">Prev</a></td><td  align='right'><a class='wikilink' href="Interface-CoreMI-1-4-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-4?action=print">Next</a></td></tr>
</table><hr />
<p class='vspace'>The <strong>Management Interface</strong> (or <strong>MI</strong>) is an OpenSIPS interface that allows external applications to trigger predefined commands inside OpenSIPS. 
</p>
<div class='vspace'></div><h4>Overview</h4>
<p>Such commands typically allows an external app to :
</p><ol><li>push data into OpenSIPS (like setting debug level, registering a contact, etc)
</li><li>fetch data from OpenSIPS (see registered users, see ongoing calls, get statistics, etc)
</li><li>trigger an internal action in OpenSIPS (reloading data, sending a message, etc)
</li></ol><p class='vspace'>The <strong>MI</strong> commands are provided by the OpenSIPS core (see <a class='wikilink' href="Interface-CoreMI-1-6-action=print.htm" tppabs="http://www.opensips.org/Documentation/Interface-CoreMI-1-6?action=print">full list</a>) and also by modules (check the commands provided by <a class='wikilink' href="Modules-1-6-action=print.htm" tppabs="http://www.opensips.org/Documentation/Modules-1-6?action=print">each module</a>).
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h4>Protocols</h4>
<p>Several protocols are available in order to connect (from external apps) to the OpenSIPS <strong>MI</strong> . While the interface itself is provided by OpenSIPS core, each protocol is provided by a separate OpenSIPS module. You can load multiple MI modules in order to use multiple MI protocols in the same time.
</p>
<p class='vspace'>Available protocols are :
</p>
<div class='vspace'></div><ul><li><strong>mi_fifo</strong> - protocol is text oriented (see the syntax in the module documentation), communications is done via a FIFO file; OpenSIPS reads from a predefined FIFO file, where the external apps are writing down the MI commands. As the file is actually as stream of data, there is no restrictions here on the amount of data OpenSIPS may return (when fetching data from OpenSIPS)
<div class='vspace'></div></li><li><strong>mi_datagram</strong> - protocol is text oriented, similar for fifo (see the syntax in the module documentation), communication is done either via UNIX SOCKETS , either via UDP packages ; OpenSIPS listens for MI commands on UDP port(s) or unisock files; The transported data is limited to the size of a Datagram (65K).
<div class='vspace'></div></li><li><strong>mi_xmlrpc</strong> - protocol is XMLRPC (XML over HTTP). As TCP is used, there is no limit in regards to the amount of transfered data.
</li></ul><p class='vspace'>All protocols do allow multiple applications (clients) to connect in the same time to the MI interface.
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h4>Examples</h4>
<p>A simple example of interacting with OpenSIPS via MI interfaces is when using the <strong>opensipsctl</strong> utility - it uses FIFO or XMLRPC protocols to push MI commands into OpenSIPS.
</p>
<p class='vspace'>The <em>'opensipsctl</em> utility allows you explicitly run an MI command via the FIFO file:
</p>
<div class='vspace'></div><pre class='escaped'>
    opensipsctl fifo _mi_cmd_
    opensipsctl fifo ps
    opensipsctl fifo debug 4
</pre>
<p class='vspace'>or it internally and transparently uses MI command them when providing different or more complex functionalities.
</p>
<p class='vspace'>A simple program in Python to trigger to run a MI command in OpenSIPs via XMLRPC protocol:
</p><pre class='escaped'>
#!/usr/bin/python
import xmlrpclib
opensips = xmlrpclib.ServerProxy('http://127.0.0.1:8080/RPC2')
print opensips.ps();
</pre>
</div>

  <div id='printfoot'>
    <div class='from'>Retrieved from http://www.opensips.org/Documentation/Interface-MI-1-4</div>
    <div class='lastmod'>Page last modified on August 05, 2013, at 03:18 PM</div></div>
<!--HTMLFooter-->
</body>
</html>
