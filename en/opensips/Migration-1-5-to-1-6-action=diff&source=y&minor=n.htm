<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>openSIPS | Documentation / Migration-1-5-to-1-6 | History</title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href="opensips.css" tppabs="http://www.opensips.org/pub/skins/opensips/opensips.css" type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  .diffbox { width:570px; border-left:1px #999999 solid; margin-top:1.33em; }
  .diffauthor { font-weight:bold; }
  .diffchangesum { font-weight:bold; }
  .difftime { font-family:verdana,sans-serif; font-size:66%; 
    background-color:#dddddd; }
  .difftype { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; font-weight:bold; }
  .diffadd { border-left:5px #99ff99 solid; padding-left:5px; }
  .diffdel { border-left:5px #ffff99 solid; padding-left:5px; }
  .diffrestore { clear:both; font-family:verdana,sans-serif; 
    font-size:66%; margin:1.5em 0px; }
  .diffmarkup { font-family:monospace; }  
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
  <link href="commentboxplus.css" tppabs="http://www.opensips.org/pub/commentboxplus/commentboxplus.css" rel='stylesheet' type='text/css' />
  <link rel='stylesheet' href="wsplus.css" tppabs="http://www.opensips.org/pub/wsplus/wsplus.css" 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url("csshover.htc")/*tpa=http://www.opensips.org/pub/wsplus/csshover.htc*/; }
    .rollover * { visibility: visible; }
  </style><![endif]-->
  <meta name='robots' content='noindex,nofollow' />

  <link rel="icon" type="image/png" href="http://opensips.org/favicon.png">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','analytics.js'/*tpa=http://www.google-analytics.com/analytics.js*/,'ga');

  ga('create', 'UA-47615177-1', 'http://www.opensips.org/Documentation/opensips.org');
  ga('send', 'pageview');

	function resizeIframe(obj) {
	    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
		  }

  </script>

</head>
<body>
<div id="main">
<!--PageHeaderFmt-->
  <div id='wikilogo'>
  <img class="motto" src="motto.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/motto.jpg" width="328" height="40" alt="The new breed of communication engine.">
  <a href="javascript:if(confirm(%27http://www.opensips.org/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/%27" tppabs="http://www.opensips.org/"><img class="logo" src="logo2.jpg" tppabs="http://www.opensips.org/pub/skins/opensips/images/logo2.jpg"
    alt='openSIPS' border='0' /></a>
 </div>
 <div id='wikihead'>
 <table border=0>
  <tr valign=top><td width=250>
   
  </td></tr>
  <tr><td width=250>
   <form action="http://www.opensips.org/">
   
    <input type='hidden' name='n' value='Documentation.Migration-1-5-to-1-6' />
    <input type='hidden' name='action' value='search' />

    <input type='text' name='q' id='formsubmit' value='' class='inputbox searchbox' />
	<input type='submit' id='formbutton' class='inputbutton searchbutton' value=' ' /></form>
  </td></tr>
  </table>
 </div>

<!--/PageHeaderFmt-->
<div id="osTopNav" >
	<div id="osTopNavLeft">
	</div>

	<div id="osTopNavRight">
	</div>

	<ul id="osTopNavList">
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/About/About  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/About/About%27" tppabs="http://www.opensips.org/About/About" title="About">About</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Downloads/Downloads  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Downloads/Downloads%27" tppabs="http://www.opensips.org/Downloads/Downloads" title="Download">Downloads</a>
		</li>
		<li>
			<a href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals" title="Documentation">Documentation</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Community/Foundation-Main  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Community/Foundation-Main%27" tppabs="http://www.opensips.org/Community/Foundation-Main" title="Community">Community</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Development/Development  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Development/Development%27" tppabs="http://www.opensips.org/Development/Development" title="Development">Development</a>
		</li>
		<li>
			<a href="javascript:if(confirm(%27http://www.opensips.org/Support/Contact  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Support/Contact%27" tppabs="http://www.opensips.org/Support/Contact" title="Support">Support</a>
		</li>
	</ul>
</div>
<!--PageMenuFmt-->
<!--/PageMenuFmt-->
  <table width='100%' align="center" cellpadding='0' cellspacing='0' id='wikimid'>
    <tr>
<!--PageLeftFmt-->
      <td valign='top' bgcolor="#E2F8DA" id='wikileft'>
        <p class='sidehead'> <span  style='color: #185662;'> Documentation</span>
</p><ul><li><a class='wikilink' title='Manuals' href="Manuals.htm" tppabs="http://www.opensips.org/Documentation/Manuals">Manuals</a>
</li><li><a class='wikilink' title='Tutorials' href="Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Tutorials">Advanced Tutorials</a>
</li><li><a class='wikilink' title='TipsFAQ' href="TipsFAQ.htm" tppabs="http://www.opensips.org/Documentation/TipsFAQ">Tips &amp; FAQ</a>
</li><li><a class='wikilink' title='Migration' href="Migration.htm" tppabs="http://www.opensips.org/Documentation/Migration">Version Migration</a>
</li><li><a class='wikilink' title='Webinars' href="Webinars.htm" tppabs="http://www.opensips.org/Documentation/Webinars">OpenSIPS Webinars</a>
</li><li><a class='wikilink' title='Troubleshooting' href="Troubleshooting.htm" tppabs="http://www.opensips.org/Documentation/Troubleshooting">Troubleshooting</a>
</li><li><a class='wikilink' title='Tools' href="Tools.htm" tppabs="http://www.opensips.org/Documentation/Tools">OpenSIPS Tools</a>
</li><li><a class='wikilink' title='Development-Tutorials' href="Development-Tutorials.htm" tppabs="http://www.opensips.org/Documentation/Development-Tutorials">Devel Tutorial</a>
</li></ul><div class='vspace'></div>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageTitleFmt-->
        
<!--PageText-->
<div id='wikitext'>
<h2 class='wikiaction'>Documentation.Migration-1-5-to-1-6 History</h2>
  <p><a href="Migration-1-5-to-1-6-action=diff&source=y&minor=y.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=diff&source=y&minor=y">Show minor edits</a> - <a href="javascript:if(confirm(%27http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=diff&source=n&minor=n  \n\nThis file was not retrieved by Teleport Pro, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=diff&source=n&minor=n%27" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=diff&source=n&minor=n">Show changes to output</a></p>
  <div id='wikidiff'>
      <div class='diffbox'><div class='difftime'>May 16, 2013, at 06:25 PM 
        by <span class='diffauthor' title='109.99.235.212'>109.99.235.212</span> - </div>
        <div class='difftype'>Changed line 1 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!! [[Documentation.Index | Documentation]] -&gt; [[Documentation.Migration-1-5-to-1-6 | Migration from 1.5.x to 1.6.x]]</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!!!!!Documentation -&gt; [[Documentation.Migration|Migration]] -&gt; Migration from 1.5.x to 1.6.x</div></div></div>
      <div class='diffrestore'><a href="Migration-1-5-to-1-6-action=edit&restore=diff-1368721528-1368097125-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=edit&restore=diff:1368721528:1368097125:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>May 09, 2013, at 12:58 PM 
        by <span class='diffauthor' title='79.118.227.150'>79.118.227.150</span> - </div>
        <div class='difftype'>Changed line 1 from:</div>
        <div class='diffdel'><div class='diffmarkup'>!! Resources -&gt; [[Resources.Documentation | Documentation]] -&gt; Upgrading from 1.5.x to 1.6.x</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>!! [[Documentation.Index | Documentation]] -&gt; [[Documentation.Migration-1-5-to-1-6 | Migration from 1.5.x to 1.6.x]]</div></div>
        <div class='difftype'>Changed line 8 from:</div>
        <div class='diffdel'><div class='diffmarkup'>You can find the all the new additions in 1.6.x release compiled [[Main.Ver160 | under this page]]. Reading it may help you understand the migration / update process.</div></div>
        <div class='difftype'>to:</div>
        <div class='diffadd'><div class='diffmarkup'>You can find the all the new additions in 1.6.x release compiled [[About.Version-1-6-0 | under this page]]. Reading it may help you understand the migration / update process.</div></div></div>
      <div class='diffrestore'><a href="Migration-1-5-to-1-6-action=edit&restore=diff-1368097125-1366804967-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=edit&restore=diff:1368097125:1366804967:&preview=y">Restore</a></div>
      <div class='diffbox'><div class='difftime'>April 24, 2013, at 02:02 PM 
        by <span class='diffauthor' title='109.99.235.212'>109.99.235.212</span> - </div>
        <div class='difftype'>Added lines 1-94:</div>
        <div class='diffadd'><div class='diffmarkup'>!! Resources -&gt; [[Resources.Documentation | Documentation]] -&gt; Upgrading from 1.5.x to 1.6.x<br />This page has been visited {$PageCount} times.<br />(:toc-float Table of Content:)<br />----<br /><br />This section is to provide useful help in migrating your OpenSIPS installations from any release from 1.5 branch to any release from 1.6 branch.<br /><br />You can find the all the new additions in 1.6.x release compiled [[Main.Ver160 | under this page]]. Reading it may help you understand the migration / update process.<br /><br />----<br />!!! DB migration<br /><br />One table was remove, one table had its schema changed and new tables were added (corresponding to the newly added modules).<br /><br />The biggest change was done in the PERMISSIONS module, where the ''trusted'' and ''address'' tables were merged into the ''address'' table.<br /><br />You can migrate your 1.5.x DB to the 1.5.x format by using the '''opensipdbctl'''(deprecated)  or '''osipsconsole''' tools:<br />[@<br />   # opensipsdbctl migrate opensips_1_5 opensips_1_6<br />   or<br />   # osipsconsole <br />   &gt; db migrate opensips_1_5 opensips_1_6<br />   &gt; quit<br />   # <br />@]<br />where :<br />* opensips_1_5 is the existing DB name corresponding to version 1.5.x format<br />* opensips_1_6 is the DB name to be created for 1.6.x format<br /><br />NOTE:<br />* the old database will not be deleted, altered or changed - it will not be touched at all<br />* new database will be created and data from old DB will be imported into it<br /><br />Take care and edit (if necessary) the '''opensipsctlrc''' /  '''osipsconsolerc&quot; files if you want to customize the DB users used for accessing the new DB.<br /><br />%red% NOTE that the migration tool is available only for MYSQL databases! %%<br /><br />(:toc-back Back to Table of Contents:)<br /><br /><br />----<br />!!! Script migration<br /><br />!!!! OpenSIPS core<br /><br /># &quot;'''$branch'''&quot; pseudovariable was replaced by &quot;'''$br'''&quot; variable<br /><br />!!!! RADIUS modules<br /><br />A generic AAA interface was build in 1.6 ( very similar to the DB interface). Therefore some changes must be made in the script in the parts referring to modules that use RADIUS. First you must load the '''aaa_radius''' module which contains the radius implementation for the AAA interface. Second, you must change the name of the module according to the list:<br /># '''auth_radius''' modules became '''auth_aaa''' module<br /># '''group_radius''' module was merged with '''group''' module<br /># '''uri_radius''' and '''uri_db''' were merged with '''uri''' module<br /># '''avp_radius''' module does not exist anymore and its functionalities were integrated in '''aaa_radius''' modules<br /><br />!!!! ALIAS_DB module<br /><br /># use_domain module parameter was removed as replaced by the &quot;d&quot; per-lookup option. <br /><br /><br />!!!! DISPATCHER module<br /># '''ds_is_from_list()''' replaced with a more generic function '''ds_is_in_list(&quot;ip&quot;,&quot;port&quot;)'''. The new function takes as parameters the IP and PORT to test against the dispatcher list, instead of using only the source IP and PORT (as ds_is_from_list()).<br />ds_is_from_list() == ds_is_in_list(&quot;$si&quot;,&quot;$sp&quot;)<br /><br />!!!! GROUP module<br /><br /># '''is_user_in()''' renamed as '''db_is_user_in()'''<br /># '''get_user_group()''' renamed as '''db_get_user_group()''' <br /><br /><br />!!!! PERMISSIONS module<br /><br /># the following script parameters are no longer used: '''peer_tag_avp''', '''trusted_table''', '''source_col'''<br />* '''ip_addr_col''' parameter was renamed as ip_col<br />* '''tag_col''' parameter was renamed as info_col<br />* '''from_col''' parameter was renamed as pattern_col <br /># the new functions '''check_address()''', '''check_source_address()''', '''get_source_group()''' replace old functions '''allow_address()''', '''allow_source_address()''', '''allow_trusted()'''<br /> <br />!!!! REGISTRAR module<br /><br /># former global parameters like '''method_filtering''', '''max_contacts''', '''append_branches''', '''use_path''', '''path_mode''' and '''path_use_received''' are now per AOR / function parameters<br /># sock_flag was moved as flag of the save() function<br /><br />!!!! TM module<br /><br /># '''t_reply()''' function does not requires any more a prior create Transaction. If no transaction is found, it will be automatically created.<br /># '''t_cancel_branch()''' take flags (&quot;a&quot; - cancel all branches; &quot;o&quot; - cancel all other branches except current; &quot;&quot; - current branch); '''t_cancel_call()''' is obsoleted and removed (same as '''t_cancel_branch(&quot;a&quot;)''').<br /><br />!!!! URI module<br /><br /># '''check_from()'''  renamed to '''db_check_from()'''<br /># '''check_to()'''  renamed to '''db_check_to()'''<br /># '''does_uri_exist()'''  renamed to '''db_does_uri_exist()'''<br /># '''get_auth_id()'''  renamed to '''db_get_auth_id()'''</div></div></div>
      <div class='diffrestore'><a href="Migration-1-5-to-1-6-action=edit&restore=diff-1366804967-1366804967-&preview=y.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=edit&restore=diff:1366804967:1366804967:&preview=y">Restore</a></div></div></div>
  
<!--PageRightFmt--><!--/PageRightFmt--></td>
</tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
  <hr class="bottomline" /></td>
    <div class='footnav'>
	
      <a rel="nofollow" href="Migration-1-5-to-1-6-action=edit.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=edit">Edit</a> |
      <a rel="nofollow" href="Migration-1-5-to-1-6-action=diff.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=diff">History</a> |
      <a rel="nofollow" href="Migration-1-5-to-1-6-action=print.htm" tppabs="http://www.opensips.org/Documentation/Migration-1-5-to-1-6?action=print" target='_blank'>Print</a> |
      <a href="RecentChanges.htm" tppabs="http://www.opensips.org/Documentation/RecentChanges">Recent Changes</a> |
      <a href="javascript:if(confirm(%27http://www.opensips.org/Site/Search  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.opensips.org/Site/Search%27" tppabs="http://www.opensips.org/Site/Search">Search</a></div>
    <div class='lastmod'>Page last modified on May 16, 2013, at 06:25 PM</div></div>
<!--HTMLFooter-->
</div>
</body>
</html>
